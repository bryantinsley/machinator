{"id":"machinator-01v","title":"Test: Create dummy-gemini mock tool","description":"Goal: Verify and complete the dummy-gemini mock tool.\n\n=== CONTEXT ===\n\nThe dummy-gemini tool already exists at tools/dummy-gemini/!\nBUILD file has been updated with both native and Linux targets.\n\nThis task is now about VERIFYING and COMPLETING the implementation.\n\n=== CURRENT STATE ===\n\n- tools/dummy-gemini/main.go exists\n- BUILD file has: dummy-gemini (native) and dummy-gemini-linux (cross-compile)\n- Builds successfully: bazel build //tools/dummy-gemini:dummy-gemini-linux\n\n=== YOUR TASK ===\n\n1. Review tools/dummy-gemini/main.go\n2. Verify it has the required modes (HAPPY, ERROR, STUCK, SCRIPTED)\n3. Add any missing functionality\n4. Add tests if missing\n5. Document usage in README or AGENTS.md\n\nVerification:\n- DUMMY_GEMINI_MODE=HAPPY works\n- DUMMY_GEMINI_MODE=ERROR returns error\n- DUMMY_GEMINI_MODE=STUCK hangs\n- Tests pass\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T21:19:41.89732-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:59:08.122179-05:00","closed_at":"2026-01-11T21:57:00.938151-05:00","close_reason":"Closed"}
{"id":"machinator-132","title":"Fix: Cross-compile setup-tui for Linux","description":"Goal: Cross-compile the setup TUI binary for Linux so it can run inside Docker.\n\n=== CONTEXT: VHS GIF Recording Workflow ===\n\nWe record terminal GIFs using VHS. Because VHS is incompatible with macOS sandbox-exec, we run it inside Docker:\n\n1. scripts/vhs-docker.sh runs: docker run --rm -v $PWD:/vhs ghcr.io/charmbracelet/vhs \u003ctape\u003e\n2. Docker is Linux. It mounts the repo at /vhs.\n3. VHS reads the tape file (e.g., orchestrator/e2e/navigation.tape)\n4. The tape says: Type \"./setup-tui-linux\" and Enter\n5. Docker (Linux) tries to execute ./setup-tui-linux\n6. THE BINARY MUST BE A LINUX ELF, NOT MACOS MACH-O\n\nCurrently setup-tui-linux is a macOS binary (Mach-O arm64). We need to cross-compile it for Linux.\n\n=== YOUR TASK ===\n\n1. Find the Go source for the setup TUI (check orchestrator/cmd/setup/)\n2. Cross-compile for Linux:\n   export GOPATH=\"$(pwd)/.go-cache\"\n   export GOCACHE=\"$(pwd)/.go-build-cache\"\n   GOOS=linux GOARCH=amd64 go build -o setup-tui-linux ./orchestrator/cmd/setup\n3. Verify: file setup-tui-linux should show \"ELF 64-bit LSB executable\"\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T18:51:44.003577-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T18:57:21.898399-05:00","closed_at":"2026-01-11T18:57:21.898399-05:00","close_reason":"Closed"}
{"id":"machinator-1zn","title":"Feat: Enforce project branch on workspace init","description":"Goal: When creating or resetting agent workspaces, ensure correct branch.\n\n=== CONTEXT ===\n\nProjects have a selected branch (from 7jw.7 branch selector). When:\n- Creating agent worktrees\n- Resetting a workspace after task failure\n- Starting orchestration\n\nWe must ensure the workspace is on the correct branch.\n\n=== YOUR TASK ===\n\n1. Read project.branch from project config\n2. When creating worktree:\n   git worktree add -b \u003cbranch\u003e ./machinator/agents/N origin/\u003cbranch\u003e\n   OR checkout if worktree exists\n\n3. Add branch verification before task dispatch:\n   - Get current branch: git -C ./machinator/agents/N branch --show-current\n   - If wrong branch: git checkout \u003cproject.branch\u003e\n\n4. Handle case where branch doesnt exist locally:\n   git fetch origin \u003cbranch\u003e\n   git checkout -b \u003cbranch\u003e origin/\u003cbranch\u003e\n\nVerification:\n- New worktrees are on project branch\n- Existing worktrees are switched if needed\n- Works with feature branches\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:53:17.449552-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:53:17.449552-05:00","dependencies":[{"issue_id":"machinator-1zn","depends_on_id":"machinator-7jw.7","type":"blocks","created_at":"2026-01-12T00:53:17.451215-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-2jd","title":"Tool: Dummy Gemini CLI","description":"Goal: Create a mock Gemini CLI binary for zero-cost testing.\n\nFile: 'tools/dummy-gemini/main.go'\n\nSpecs:\n1. MUST compile to a binary named 'dummy-gemini'.\n2. MUST accept (and ignore) these flags without error:\n   - '--prompt', '--repo', '--tokens', '--model', '--temperature'\n   - '--json' (if present, output JSON)\n3. Behavior MUST be driven by 'GEMINI_MODE' env var:\n   - 'HAPPY': Output '{\"response\": \"mock response\"}' to stdout. Exit 0.\n   - 'ERROR': Output 'Quota exceeded' to stderr. Exit 1.\n   - 'STUCK': Sleep for 30 seconds (simulating hang).\n   - (Default): Same as HAPPY.\n\nVerification:\n- Build the tool.\n- Run 'GEMINI_MODE=ERROR ./dummy-gemini --prompt foo' -\u003e Assert Exit 1.\n\nSafety:\n- Do NOT implement any real LLM calls.\n- If you find yourself importing 'google/generative-ai', STOP. You are doing it wrong.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T09:04:42.159818-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:00:44.186325-05:00","closed_at":"2026-01-11T15:36:40.735272-05:00","close_reason":"Implemented dummy-gemini mock tool with HAPPY, ERROR, and STUCK modes. Added Bazel BUILD file and verified behavior.","dependencies":[{"issue_id":"machinator-2jd","depends_on_id":"machinator-a2i","type":"blocked-by","created_at":"2026-01-11T09:04:42.178448-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-2jd","depends_on_id":"machinator-a2i","type":"blocks","created_at":"2026-01-11T09:05:17.684464-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-2qe","title":"Test: Golden Files for Modals","description":"Implement golden tests for Project Detail, Edit Field, and Delete Confirmation modals. Ensure each state is captured in a separate .golden file.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:39:51.246459-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:01:10.620895-05:00","closed_at":"2026-01-11T13:17:52.36236-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-2qe","depends_on_id":"machinator-x4n","type":"blocked-by","created_at":"2026-01-11T08:39:51.249473-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-2qe","depends_on_id":"machinator-x4n","type":"blocks","created_at":"2026-01-11T08:41:40.836582-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-2y6","title":"Setup: Use Docker for VHS terminal recording","description":"Goal: Configure VHS to run via Docker instead of local installation, avoiding sandbox compatibility issues.\n\nBackground:\nVHS (terminal GIF recorder) is incompatible with macOS sandbox-exec even with permissive settings. The Docker approach provides built-in isolation and avoids this issue entirely.\n\nSpecs:\n1. Update scripts/dev_setup.sh to check for Docker instead of local vhs:\n   - Check: docker --version\n   - Suggest: Install Docker Desktop from https://docker.io\n\n2. Create a wrapper script scripts/vhs-docker.sh:\n   docker run --rm -v $PWD:/vhs ghcr.io/charmbracelet/vhs \"$@\"\n\n3. Update any existing .tape file references to use the wrapper or document Docker usage\n\n4. Test: scripts/vhs-docker.sh orchestrator/e2e/navigation.tape\n\nReference: https://github.com/charmbracelet/vhs\n\nVerification:\n- Docker run should produce GIF output\n- No sandbox issues\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T18:40:04.516277-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T18:45:44.061618-05:00","closed_at":"2026-01-11T18:45:44.061618-05:00","close_reason":"Closed"}
{"id":"machinator-3pw","title":"Feat: Add CLI flags for direct orchestration control","description":"PARENT TASK - See subtasks for implementation.\n\nGoal: Allow CLI control of machinator behavior without TUI interaction.\n\nSubtasks will implement individual flags.\n\nCHALLENGE:complex","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T00:51:01.953326-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:51:29.078564-05:00"}
{"id":"machinator-3pw.1","title":"CLI: Add --project flag to select project","description":"Goal: Allow specifying project by ID on command line.\n\n=== YOUR TASK ===\n\n1. Add flag: --project=N (int)\n2. If provided:\n   - Load project config from ~/.machinator/projects/N/\n   - Validate project exists\n   - Skip setup, go straight to orchestrator\n3. Error if project doesnt exist\n\nVerification:\n- machinator --project=1 loads project 1\n- machinator --project=999 shows error\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:51:37.557106-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:51:37.557106-05:00","dependencies":[{"issue_id":"machinator-3pw.1","depends_on_id":"machinator-3pw","type":"parent-child","created_at":"2026-01-12T00:51:37.55853-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-3pw.2","title":"CLI: Add --agents flag to override count","description":"Goal: Allow specifying agent count on command line.\n\n=== YOUR TASK ===\n\n1. Add flag: --agents=N (int)\n2. If provided with --project:\n   - Override project agent_count for this run\n   - Validate N \u003e 0\n3. Only valid with --project\n\nVerification:\n- machinator --project=1 --agents=5 runs with 5 agents\n- --agents without --project shows error\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:51:46.943065-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:51:46.943065-05:00","dependencies":[{"issue_id":"machinator-3pw.2","depends_on_id":"machinator-3pw","type":"parent-child","created_at":"2026-01-12T00:51:46.944047-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-3pw.2","depends_on_id":"machinator-3pw.1","type":"blocks","created_at":"2026-01-12T00:51:46.945713-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-3pw.3","title":"CLI: Add --run flag to auto-start","description":"Goal: Allow starting orchestration immediately instead of paused.\n\n=== YOUR TASK ===\n\n1. Add flag: --run (bool)\n2. If provided with --project:\n   - Start orchestration running (not paused)\n   - Begin task dispatch immediately\n3. Default behavior (no --run) = start paused\n\nVerification:\n- machinator --project=1 --run starts executing tasks\n- machinator --project=1 starts paused\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:51:54.834181-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:51:54.834181-05:00","dependencies":[{"issue_id":"machinator-3pw.3","depends_on_id":"machinator-3pw","type":"parent-child","created_at":"2026-01-12T00:51:54.835245-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-3pw.3","depends_on_id":"machinator-3pw.1","type":"blocks","created_at":"2026-01-12T00:51:54.836753-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-3ra","title":"Refactor: Setup logic to Package","description":"Refactor 'orchestrator/cmd/setup' main logic into a reusable package 'orchestrator/pkg/setup'.\n- Expose a Run() function that returns the resulting ProjectConfig.\n- Ensure TUI models are decoupled from 'main' package.\n- This is a prerequisite for embedding setup into the unified binary.\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T09:04:58.37342-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:05:33.466529-05:00","closed_at":"2026-01-11T16:05:33.466529-05:00","close_reason":"Refactored setup logic into orchestrator/pkg/setup. Exposed Run() function and added 'Open' capability to select a project. Decoupled TUI models from main package.","dependencies":[{"issue_id":"machinator-3ra","depends_on_id":"machinator-sbi","type":"blocked-by","created_at":"2026-01-11T09:04:58.374621-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-3ra","depends_on_id":"machinator-sbi","type":"blocks","created_at":"2026-01-11T09:05:18.149088-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-43q","title":"Setup: Install VHS locally via go install","description":"Goal: Install VHS (terminal GIF recorder) into the project-local Go bin directory.\n\nSpecs:\n1. Set up local Go environment:\n   export GOPATH=\"$(pwd)/.go-cache\"\n   export GOBIN=\"$(pwd)/.go-cache/bin\"\n   export GOCACHE=\"$(pwd)/.go-build-cache\"\n   mkdir -p \"$GOPATH\" \"$GOBIN\" \"$GOCACHE\"\n\n2. Install VHS:\n   go install github.com/charmbracelet/vhs@latest\n\n3. Verify installation:\n   .go-cache/bin/vhs --version\n\nVerification:\n- .go-cache/bin/vhs should exist and be executable\n- Running .go-cache/bin/vhs --version should output version info\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T17:08:14.758914-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T17:27:10.957621-05:00","closed_at":"2026-01-11T17:27:10.957621-05:00","close_reason":"Closed"}
{"id":"machinator-4e9","title":"Setup: Symlink ttyd binary to local bin","description":"Goal: Download and install ttyd binary to the project-local bin directory.\n\nBackground:\nttyd is required by VHS for terminal recording. It must be downloaded fresh (not symlinked from gitignored directories).\n\nSpecs:\n1. Ensure .go-cache/bin directory exists:\n   mkdir -p .go-cache/bin\n\n2. Download ttyd binary for macOS ARM64:\n   curl -L -o .go-cache/bin/ttyd https://github.com/tsl0922/ttyd/releases/download/1.7.7/ttyd.darwin -s\n   chmod +x .go-cache/bin/ttyd\n\n3. Verify:\n   .go-cache/bin/ttyd --version\n\nVerification:\n- .go-cache/bin/ttyd should exist and be executable\n- Running .go-cache/bin/ttyd --version should output version info\n\nNote: This must be a fresh download, NOT a symlink to _archive/ which is gitignored.\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T17:08:28.058957-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T17:36:38.424537-05:00","closed_at":"2026-01-11T17:36:38.424537-05:00","close_reason":"Closed"}
{"id":"machinator-4kx","title":"Gov: Pre-commit VHS Freshness Check","description":"Goal: Add a check to pre-commit that warns if VHS GIFs are stale.\n\nSpecs:\n1. Edit 'scripts/hooks/pre-commit'\n2. Add section after UI tests that compares timestamps:\n   - For each .tape in orchestrator/e2e/\n   - Find corresponding .gif in docs/ui-history/\n   - If .tape is newer than .gif, WARN (not fail, just warn)\n3. Output: 'Warning: navigation.gif may be stale. Run scripts/update-ui.sh'\n\nVerification:\n- touch orchestrator/e2e/navigation.tape\n- Attempt commit, verify warning appears\n\nSafety:\n- This is a WARNING only, not a failure condition.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:32.203173-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T20:24:54.642257-05:00","closed_at":"2026-01-11T20:24:54.642257-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-4kx","depends_on_id":"machinator-9yr","type":"blocks","created_at":"2026-01-11T16:40:07.663461-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-4tb","title":"Epic: UI Component Library","description":"Goal: Create a reusable component library that ensures all UI elements are mouse-clickable.\n\n=== CONTEXT ===\n\nSee planning/ui-component-system.md for full design.\n\nThe TUI needs consistent, reusable components that:\n- Always handle mouse events correctly\n- Use consistent styling\n- Are easy to use - if you use the component, it just works\n\nThis is Phase 1: Creating the core library.\n\n=== DELIVERABLES ===\n\n1. orchestrator/pkg/ui/components/ package\n2. Clickable interface\n3. Button component\n4. ListItem component  \n5. ClickDispatcher\n6. Tests for all components\n\n=== SUCCESS CRITERIA ===\n\n- go test ./orchestrator/pkg/ui/... passes\n- Components can be used in TUI code\n- Mouse clicks work correctly\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"epic","assignee":"Gemini-01","created_at":"2026-01-11T21:30:09.410064-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:34:39.067591-05:00","closed_at":"2026-01-11T21:52:53.161022-05:00","close_reason":"Closed"}
{"id":"machinator-4tb.1","title":"UI: Create Clickable interface and base types","description":"Goal: Create the foundational interfaces for the clickable component system.\n\n=== CONTEXT ===\n\nSee planning/ui-component-system.md for design.\n\nAll interactive UI components will implement the Clickable interface. This task creates the foundation that other components build on.\n\n=== YOUR TASK ===\n\n1. Create package: orchestrator/pkg/ui/components/\n2. Create interfaces file: components.go\n\n```go\npackage components\n\nimport tea \"github.com/charmbracelet/bubbletea\"\n\n// Clickable is implemented by all interactive components\ntype Clickable interface {\n    // Contains returns true if the point is within bounds\n    Contains(x, y int) bool\n    \n    // HandleClick processes a click and returns a command\n    HandleClick(x, y int) tea.Cmd\n    \n    // Bounds returns position and size\n    Bounds() (x, y, width, height int)\n}\n\n// Bounds helper struct\ntype Rect struct {\n    X, Y, Width, Height int\n}\n\nfunc (r Rect) Contains(x, y int) bool {\n    return x \u003e= r.X \u0026\u0026 x \u003c r.X+r.Width \u0026\u0026 \n           y \u003e= r.Y \u0026\u0026 y \u003c r.Y+r.Height\n}\n```\n\n3. Add basic tests\n\nVerification:\n- go build ./orchestrator/pkg/ui/components works\n- go test ./orchestrator/pkg/ui/components passes\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T21:30:27.218232-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:54:20.083153-05:00","closed_at":"2026-01-11T21:54:20.083153-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-4tb.1","depends_on_id":"machinator-4tb","type":"parent-child","created_at":"2026-01-11T21:30:27.21983-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-4tb.2","title":"UI: Create Button component","description":"Goal: Create a reusable Button component that handles mouse clicks.\n\n=== CONTEXT ===\n\nSee planning/ui-component-system.md for design.\n\nThe Button is the most fundamental clickable component. It should:\n- Render a styled button label\n- Track its screen position\n- Handle mouse clicks\n- Support focus state\n- Have consistent styling\n\n=== YOUR TASK ===\n\n1. Create orchestrator/pkg/ui/components/button.go:\n\n```go\npackage components\n\nimport (\n    tea \"github.com/charmbracelet/bubbletea\"\n    \"github.com/charmbracelet/lipgloss\"\n)\n\ntype Button struct {\n    Label    string\n    OnClick  func() tea.Cmd\n    bounds   Rect\n    focused  bool\n}\n\nfunc NewButton(label string, onClick func() tea.Cmd) *Button\n\nfunc (b *Button) SetBounds(x, y, width, height int)\nfunc (b *Button) Contains(x, y int) bool  \nfunc (b *Button) HandleClick(x, y int) tea.Cmd\nfunc (b *Button) Bounds() (int, int, int, int)\nfunc (b *Button) SetFocused(focused bool)\nfunc (b *Button) View() string\n```\n\n2. Create button_test.go with tests:\n   - Click inside bounds triggers OnClick\n   - Click outside bounds returns nil\n   - View renders correctly\n\n3. Use lipgloss styles from a shared styles package\n\nVerification:\n- go test ./orchestrator/pkg/ui/components/... passes\n- Button renders with proper styling\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T21:30:45.587629-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:54:20.090893-05:00","closed_at":"2026-01-11T21:54:20.090893-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-4tb.2","depends_on_id":"machinator-4tb","type":"parent-child","created_at":"2026-01-11T21:30:45.588797-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-4tb.2","depends_on_id":"machinator-4tb.1","type":"blocks","created_at":"2026-01-11T21:30:45.590105-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-4tb.3","title":"UI: Create ListItem component","description":"Goal: Create a reusable ListItem component for clickable list entries.\n\n=== CONTEXT ===\n\nSee planning/ui-component-system.md for design.\n\nLists are everywhere in the TUI (tasks, projects, accounts). Each item should be clickable to select it.\n\n=== YOUR TASK ===\n\n1. Create orchestrator/pkg/ui/components/list_item.go:\n\n```go\npackage components\n\ntype ListItem struct {\n    Label     string\n    Value     interface{}  // Associated data\n    OnSelect  func(value interface{}) tea.Cmd\n    bounds    Rect\n    selected  bool\n}\n\nfunc NewListItem(label string, value interface{}, onSelect func(interface{}) tea.Cmd) *ListItem\n\nfunc (l *ListItem) SetBounds(x, y, width, height int)\nfunc (l *ListItem) Contains(x, y int) bool\nfunc (l *ListItem) HandleClick(x, y int) tea.Cmd\nfunc (l *ListItem) Bounds() (int, int, int, int)\nfunc (l *ListItem) SetSelected(selected bool)\nfunc (l *ListItem) View() string\n```\n\n2. Create list_item_test.go with tests\n\n3. Selected state should render differently (highlight)\n\nVerification:\n- go test ./orchestrator/pkg/ui/components/... passes\n- ListItem renders with selection highlight\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T21:31:01.639374-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:54:20.096149-05:00","closed_at":"2026-01-11T21:54:20.096149-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-4tb.3","depends_on_id":"machinator-4tb","type":"parent-child","created_at":"2026-01-11T21:31:01.640289-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-4tb.3","depends_on_id":"machinator-4tb.1","type":"blocks","created_at":"2026-01-11T21:31:01.641606-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-4tb.4","title":"UI: Create ClickDispatcher","description":"Goal: Create a central dispatcher that routes mouse events to components.\n\n=== CONTEXT ===\n\nSee planning/ui-component-system.md for design.\n\nInstead of each screen manually checking mouse coordinates, the ClickDispatcher maintains a registry of clickable components and routes events automatically.\n\n=== YOUR TASK ===\n\n1. Create orchestrator/pkg/ui/components/dispatcher.go:\n\n```go\npackage components\n\ntype ClickDispatcher struct {\n    components []Clickable\n}\n\nfunc NewClickDispatcher() *ClickDispatcher\n\n// Register adds a component to receive click events\nfunc (d *ClickDispatcher) Register(c Clickable)\n\n// Clear removes all registered components (call before each render)\nfunc (d *ClickDispatcher) Clear()\n\n// HandleMouse routes a mouse event to the appropriate component\nfunc (d *ClickDispatcher) HandleMouse(msg tea.MouseMsg) tea.Cmd {\n    if msg.Action != tea.MouseActionRelease || msg.Button != tea.MouseButtonLeft {\n        return nil\n    }\n    for _, c := range d.components {\n        if c.Contains(msg.X, msg.Y) {\n            return c.HandleClick(msg.X, msg.Y)\n        }\n    }\n    return nil\n}\n```\n\n2. Create dispatcher_test.go\n\n3. Components registered later have higher priority (click last-registered first)\n\nVerification:\n- go test ./orchestrator/pkg/ui/components/... passes\n- Dispatcher routes clicks to correct component\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T21:31:19.480694-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:54:20.100041-05:00","closed_at":"2026-01-11T21:54:20.100041-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-4tb.4","depends_on_id":"machinator-4tb","type":"parent-child","created_at":"2026-01-11T21:31:19.48161-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-4tb.4","depends_on_id":"machinator-4tb.2","type":"blocks","created_at":"2026-01-11T21:31:19.483246-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-4tb.4","depends_on_id":"machinator-4tb.3","type":"blocks","created_at":"2026-01-11T21:31:19.484862-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-58k","title":"Test: Create E2E test harness with fixture repo","description":"Goal: Create an E2E test harness that uses the dummy-gemini to test orchestrator flows.\n\n=== CONTEXT: The Simulacrum ===\n\nPer planning/architecture-vision.md Section 5:\nA dedicated fixture repo with pre-defined beads allows testing that beads correctly transition from open -\u003e in_progress -\u003e closed.\n\n=== YOUR TASK ===\n\n1. Create testdata/fixture-repo/ with:\n   - .beads/issues.jsonl with test issues\n   - Known dependency graph (some blocked, some ready)\n   - Simple source files to operate on\n\n2. Create tools/e2e-harness/ or integrate into go test:\n   - Set up temp directory with fixture repo\n   - Configure orchestrator to use dummy-gemini\n   - Run orchestrator for N cycles\n   - Assert beads transitioned correctly\n\n3. Test scenarios:\n   - HAPPY mode: All tasks complete\n   - ERROR mode: Tasks get blocked appropriately\n   - STUCK mode: Timeout triggers\n\nVerification:\n- go test ./tools/e2e-harness/... passes\n- Test output shows bead state transitions\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T21:19:58.707064-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:20:29.85339-05:00","closed_at":"2026-01-11T22:20:29.85339-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-58k","depends_on_id":"machinator-01v","type":"blocks","created_at":"2026-01-11T21:19:58.70889-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-58k.1","title":"Test: Create fixture repo for E2E","description":"Create testdata/fixture-repo/ with .beads/issues.jsonl containing a known graph of tasks (some blocked, some ready) to support E2E testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T22:03:01.120443-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:06:48.440645-05:00","closed_at":"2026-01-11T22:06:48.440645-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-58k.1","depends_on_id":"machinator-58k","type":"parent-child","created_at":"2026-01-11T22:03:01.121869-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-58k.2","title":"Test: Create E2E harness skeleton","description":"Create tools/e2e-harness/ or test infrastructure to run the orchestrator against the fixture repo using dummy-gemini.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T22:03:10.365819-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:14:55.409743-05:00","closed_at":"2026-01-11T22:14:55.409743-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-58k.2","depends_on_id":"machinator-58k","type":"parent-child","created_at":"2026-01-11T22:03:10.366824-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-58k.3","title":"Test: Implement E2E scenarios","description":"Implement HAPPY, ERROR, and STUCK scenarios in the E2E harness and verify assertions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T22:03:19.640521-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:19:49.957869-05:00","closed_at":"2026-01-11T22:19:49.957869-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-58k.3","depends_on_id":"machinator-58k","type":"parent-child","created_at":"2026-01-11T22:03:19.64136-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-5ig","title":"UI: Fix broken tables and alignment issues","description":"Goal: Fix visual rendering issues in the TUI - broken tables, misaligned lists, etc.\n\n=== CONTEXT ===\n\nThe TUI has various visual rendering issues that need polish:\n- Broken table layouts\n- Lists not properly aligned\n- Inconsistent spacing\n\n=== YOUR TASK ===\n\n1. Run the setup TUI and orchestrator TUI to observe issues:\n   go run ./orchestrator/cmd/setup\n   go run ./orchestrator/cmd/machinator\n\n2. Identify specific issues:\n   - Tables with misaligned columns\n   - Lists with inconsistent bullets/indentation  \n   - Panels that overflow or clip text\n   - Unicode box-drawing characters broken\n\n3. Fix each issue, likely in:\n   - orchestrator/pkg/setup/setup.go (View functions)\n   - orchestrator/pkg/orchestrator/tui.go (View function)\n\n4. Use lipgloss styling consistently\n5. Update golden files if layouts change intentionally\n\nVerification:\n- Tables render with aligned columns\n- Lists have consistent indentation\n- No visual artifacts or clipping\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T21:22:08.121697-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:47:12.048905-05:00","closed_at":"2026-01-11T21:47:12.048905-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-5ig","depends_on_id":"machinator-pdh","type":"parent-child","created_at":"2026-01-11T21:23:40.21573-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-5n7","title":"Fix: Update quota check to use managed Gemini CLI","description":"Goal: Update the quota check to use the Gemini CLI managed by machinator setup.\n\n=== CONTEXT ===\n\nThe orchestrator checks quota by calling a shell script (machinator/check_quota.sh).\nThe setup wizard installs/manages a Gemini CLI in ~/.machinator/gemini.\nThese should be coordinated.\n\n=== CURRENT STATE ===\n\norchestrator/pkg/orchestrator/quota_check.go:\n- Calls machinator/check_quota.sh\n- Parses percentage from output\n\nbootstrap/check_quota.sh:\n- Calls gemini --dump-quota  \n- Uses whatever gemini is in PATH\n\n=== YOUR TASK ===\n\n1. Update quota check to use the managed Gemini CLI:\n   - Check ~/.machinator/gemini first\n   - Fall back to PATH gemini\n   - Use MACHINATOR_DIR env var if set\n\n2. Option A: Update the shell script\n3. Option B: Implement quota check directly in Go (better long-term)\n\n4. Ensure consistent behavior with bootstrap orchestrator\n\nVerification:\n- Quota check works when gemini is only in ~/.machinator/\n- Quota check works when gemini is in PATH\n- Percentage displays correctly in TUI\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T21:22:56.957704-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:47:12.020759-05:00","closed_at":"2026-01-11T21:47:12.020759-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-5n7","depends_on_id":"machinator-pdh","type":"parent-child","created_at":"2026-01-11T21:23:40.362271-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-5r3","title":"UI: Migrate Orchestrator TUI to use component library","description":"Goal: Replace ad-hoc clickable elements in Orchestrator with component library.\n\n=== CONTEXT ===\n\nPer planning/ui-component-system.md Phase 3, migrate Orchestrator TUI to use components.\n\n=== YOUR TASK ===\n\n1. Identify all interactive elements in orchestrator/pkg/orchestrator/\n2. Replace with component library:\n   - Buttons ‚Üí components.Button\n   - Event list ‚Üí components.ListItem\n   - Add ClickDispatcher\n\n3. Run tests to verify no regression\n4. Update VHS tapes if needed\n\nVerification:\n- Orchestrator TUI uses component library\n- All clicks still work\n- Tests pass\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:44:55.009489-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:44:55.009489-05:00","dependencies":[{"issue_id":"machinator-5r3","depends_on_id":"machinator-7jw.1","type":"blocks","created_at":"2026-01-12T00:44:55.010871-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7dy","title":"UI: Design Agent Grid component","description":"Goal: Design the Agent Grid TUI component for visualizing multiple agents.\n\n=== CONTEXT: Multi-Agent UI ===\n\nPer planning/architecture-vision.md Section 4:\nThe TUI must evolve to visualize parallel work streams with:\n- Agent Grid: Dashboard showing status of multiple agents\n- Focus View: Drill down into specific agent\n- Global HUD: Quota usage, beads remaining, system health\n- Control Plane: Pause/Resume, Panic Button\n\n=== YOUR TASK ===\n\n1. Create orchestrator/pkg/ui/agentgrid/ package\n2. Design the AgentGrid bubble tea Model:\n   - Displays N agent cards in a grid layout\n   - Each card shows: Agent Name, Status (Active/Idle/Error), Current Task\n   - Keyboard nav to select agent and drill down\n3. Create mock data for development\n4. Basic styling with lipgloss\n\nVerification:\n- go build works\n- Running the component shows a grid of agent status cards\n- Can navigate between agents with arrow keys\n\nCHALLENGE:complex","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T21:20:14.411944-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:31:05.113268-05:00","closed_at":"2026-01-11T22:31:05.113268-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7dy","depends_on_id":"machinator-wtz","type":"blocks","created_at":"2026-01-11T21:20:14.432065-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7dy.1","title":"UI: Create AgentCard component","description":"Create orchestrator/pkg/ui/agentgrid/card.go with AgentCard component that displays agent name, status, and task. Ensure it implements Clickable.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T22:27:21.026168-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:31:05.103164-05:00","closed_at":"2026-01-11T22:31:05.103164-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7dy.1","depends_on_id":"machinator-7dy","type":"parent-child","created_at":"2026-01-11T22:27:21.029026-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7dy.2","title":"UI: Create AgentGrid component","description":"Create orchestrator/pkg/ui/agentgrid/grid.go that manages a grid of AgentCards, handles keyboard navigation (arrows) and focus.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T22:27:26.236869-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:31:05.108862-05:00","closed_at":"2026-01-11T22:31:05.108862-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7dy.2","depends_on_id":"machinator-7dy","type":"parent-child","created_at":"2026-01-11T22:27:26.238144-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7dy.3","title":"UI: Create AgentGrid demo","description":"Create a main_test.go or separate cmd to demonstrate the AgentGrid with mock data.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T22:27:31.443188-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:31:05.110935-05:00","closed_at":"2026-01-11T22:31:05.110935-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7dy.3","depends_on_id":"machinator-7dy","type":"parent-child","created_at":"2026-01-11T22:27:31.443918-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw","title":"Epic: Multi-Agent Orchestration UI","description":"Goal: Build the UI features needed to manage and monitor multiple agents.\n\n=== CONTEXT ===\n\nWhen running multiple agents, the TUI needs to:\n- Show status of all agents\n- Let user select which agent to watch\n- Control orchestration (start/stop/pause)\n- Manage agent count dynamically\n- Show quota across all accounts\n\nThis epic tracks all the multi-agent UI work.\n\nCHALLENGE:complex","status":"in_progress","priority":2,"issue_type":"epic","assignee":"Gemini-01","created_at":"2026-01-11T23:21:53.153316-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:31:09.725769-05:00"}
{"id":"machinator-7jw.1","title":"UI: Dropdown component","description":"Goal: Create a reusable Dropdown component for selection.\n\n=== CONTEXT ===\n\nSeveral features need dropdowns: agent selector, branch selector, etc.\n\n=== YOUR TASK ===\n\n1. Add to orchestrator/pkg/ui/components/:\n\n```go\ntype Dropdown struct {\n    Label       string\n    Options     []string\n    Selected    int\n    OnChange    func(selected int) tea.Cmd\n    expanded    bool\n    bounds      Rect\n}\n\nfunc (d *Dropdown) Toggle()           // Expand/collapse\nfunc (d *Dropdown) Contains(x, y int) bool\nfunc (d *Dropdown) HandleClick(x, y int) tea.Cmd\nfunc (d *Dropdown) Render() string\n```\n\n2. Expanded view shows list of options\n3. Click option ‚Üí select ‚Üí collapse\n4. Keyboard: Enter to toggle, arrows to navigate\n\nVerification:\n- Dropdown renders correctly\n- Click to expand/select works\n- Keyboard navigation works\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T23:22:04.704884-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:47:18.02301-05:00","closed_at":"2026-01-12T01:47:18.02301-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7jw.1","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:22:04.706079-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw.2","title":"UI: Multi-account quota display","description":"Goal: Show quota status for all configured accounts in the TUI.\n\n=== CONTEXT ===\n\nWith account pooling, users have multiple Gemini accounts. The UI should show quota for each.\n\n=== YOUR TASK ===\n\n1. In the TUI header or status bar, show quota for each account:\n   - default: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80%\n   - work: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 60%\n\n2. If too many accounts, collapse to summary:\n   - Accounts: 3/4 available\n\n3. Clicking expands to show details\n\n4. Color-code: green (plenty), yellow (low), red (exhausted)\n\nVerification:\n- All accounts quota visible\n- Exhausted accounts highlighted\n- Works with 1 account (no change from current)\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T23:22:19.075068-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:22:19.075068-05:00","dependencies":[{"issue_id":"machinator-7jw.2","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:22:19.081486-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-7jw.2","depends_on_id":"machinator-dgj.4","type":"blocks","created_at":"2026-01-11T23:22:19.086002-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw.3","title":"UI: Agent selector dropdown","description":"Goal: Let user select which agents output to watch.\n\n=== CONTEXT ===\n\nWith multiple agents, we cant show all outputs simultaneously. Use dropdown to select which agent to watch.\n\n=== YOUR TASK ===\n\n1. Add agent selector dropdown to main view:\n   - Lists: Agent-1, Agent-2, Agent-3, ...\n   - Default: first active agent\n\n2. Selecting an agent switches the event feed to that agents output\n\n3. Visual indicator on dropdown for:\n   - Active (working)\n   - Idle (waiting)\n   - Error (something wrong)\n\nVerification:\n- Can switch between agents\n- Event feed updates to selected agent\n- Status indicators visible\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T23:22:31.753104-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:22:31.753104-05:00","dependencies":[{"issue_id":"machinator-7jw.3","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:22:31.754359-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-7jw.3","depends_on_id":"machinator-7jw.1","type":"blocks","created_at":"2026-01-11T23:22:31.756556-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw.4","title":"UI: Agent status panel","description":"Goal: Add panel showing all agents status at a glance.\n\n=== CONTEXT ===\n\nDefault view needs a panel showing what each agent is doing without watching their full output.\n\n=== YOUR TASK ===\n\n1. Create AgentStatusPanel showing for each agent:\n   - Agent name (Agent-1, Agent-2, ...)\n   - Current task ID and title (truncated)\n   - Time working on current task\n   - Time since last event (idle time)\n   - Status icon: ‚ö° active, üí§ idle, ‚ùå error\n\n2. Layout:\n```\n‚îå‚îÄ Agents ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ ‚ö° Agent-1  machinator-abc  [5m 23s]  ‚ñë‚ñë‚ñë    ‚îÇ\n‚îÇ üí§ Agent-2  (idle)          [2m 10s]  ‚ñà‚ñà‚ñà    ‚îÇ\n‚îÇ ‚ö° Agent-3  machinator-xyz  [1m 45s]  ‚ñë      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n3. Clicking an agent row switches to watching that agent\n\nVerification:\n- All agents visible in panel\n- Active/idle time updates live\n- Click to select works\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T23:22:46.896909-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:41:31.832098-05:00","closed_at":"2026-01-12T01:41:31.832098-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7jw.4","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:22:46.899814-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw.5","title":"UI: Orchestration controls (start/stop/pause)","description":"Goal: Add buttons to control orchestration without quitting the app.\n\n=== CONTEXT ===\n\nUsers need to pause, stop, and start agents without exiting the TUI.\n\n=== ACTIONS ===\n\n- **Pause** ‚Äî Stop launching new agents, let running agents finish\n- **Stop** ‚Äî Kill all running agents immediately\n- **Start** ‚Äî Resume launching agents\n\n=== YOUR TASK ===\n\n1. Add control buttons in header or footer:\n   [ ‚ñ∂ Start ] [ ‚è∏ Pause ] [ ‚èπ Stop ]\n\n2. Only show relevant buttons (e.g., hide Start when running)\n\n3. Implement actions:\n   - Pause: set flag to not launch new, wait for running\n   - Stop: SIGTERM all running gemini processes\n   - Start: clear pause flag, resume orchestration loop\n\n4. Visual feedback:\n   - Status indicator: \"Running\", \"Paused\", \"Stopped\"\n   - Running agent count: \"3/3 agents running\"\n\nVerification:\n- Pause stops new agent launches\n- Stop kills all agents\n- Start resumes operation\n- No exit from TUI\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T23:23:03.047815-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:44:41.369873-05:00","closed_at":"2026-01-12T01:44:41.369873-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7jw.5","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:23:03.048672-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw.6","title":"UI: Dynamic agent count adjustment","description":"Goal: Allow user to increase/decrease agent count while running.\n\nOn increase: Create new agent worktree, start launching.\nOn decrease: Dialog asks kill now or let finish.\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T23:26:05.196799-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:41:26.659434-05:00","closed_at":"2026-01-12T01:41:26.659434-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-7jw.6","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:26:05.197697-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-7jw.6","depends_on_id":"machinator-7jw.5","type":"blocks","created_at":"2026-01-11T23:26:05.199015-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-7jw.7","title":"Setup: Branch selector for projects","description":"Goal: Make user explicitly select a git branch during project setup.\n\n=== CONTEXT ===\n\nCurrently may default to main. User should explicitly choose branch.\n\n=== YOUR TASK ===\n\n1. In project setup, after repo URL is entered:\n   - Fetch available branches: git ls-remote --heads \u003curl\u003e\n   - Display dropdown with branch options\n   - Include option to create new branch\n\n2. Store selected branch in project.json\n\n3. When starting agent worktrees, checkout selected branch\n\n4. NO DEFAULT TO MAIN - user must explicitly select\n\nVerification:\n- Dropdown shows all remote branches\n- Can select existing branch\n- Can create new branch\n- Selection saved to project.json\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T23:26:19.570771-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:26:19.570771-05:00","dependencies":[{"issue_id":"machinator-7jw.7","depends_on_id":"machinator-7jw","type":"parent-child","created_at":"2026-01-11T23:26:19.572034-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-7jw.7","depends_on_id":"machinator-7jw.1","type":"blocks","created_at":"2026-01-11T23:26:19.573561-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-8cx","title":"Doc: VHS Tape for Orchestrator Running","description":"Goal: Create a VHS tape showing the orchestrator executing a task.\n\nSpecs:\n1. New file: orchestrator/e2e/orchestrator_run.tape\n2. Shows: Starting machinator, seeing task list, executing a task.\n3. Uses dummy-gemini in HAPPY mode for predictable output.\n4. Output to docs/ui-history/orchestrator_run.gif\n\nVerification:\n- vhs orchestrator/e2e/orchestrator_run.tape runs without error\n- docs/ui-history/orchestrator_run.gif exists and is \u003e50KB\n\nSafety:\n- Use a temp HOME to avoid polluting user config.\n- Mock bd commands if needed for predictable output.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:57.255467-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T20:59:20.967933-05:00","closed_at":"2026-01-11T20:59:20.967933-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-8cx","depends_on_id":"machinator-g79","type":"blocks","created_at":"2026-01-11T16:40:08.947852-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-8f8","title":"Docs: Create reference/config.md","description":"Goal: Document all configuration options.\n\n=== CONTEXT ===\n\nPer planning/documentation-strategy.md and planning/directory-structure.md, we need config reference docs.\n\n=== YOUR TASK ===\n\n1. Create docs/reference/ directory\n2. Create config.md documenting:\n   - ~/.machinator/settings.json options\n   - project.json fields (timeouts, agent_count, etc.)\n   - account.json fields\n   - Environment variables (BD_AGENT_NAME, etc.)\n\n3. Include examples for each config\n4. Note defaults\n\nVerification:\n- All config options documented\n- Examples are copy-pasteable\n- Matches actual code behavior\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:44:36.227362-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:44:36.227362-05:00"}
{"id":"machinator-90n","title":"Feat: Unified Machinator Binary","description":"Goal: Unified entry point 'machinator'.\n\nFile: 'cmd/machinator/main.go'\n\nSpecs:\n1. Import 'machinator/pkg/setup' and 'machinator/pkg/orchestrator'.\n2. Implement Logic:\n   - Check 'os.UserHomeDir()/.machinator/config.json'.\n   - Check './machinator.json'.\n   - IF (No Config):\n     - Log 'Starting Setup Mode...'\n     - Call 'setup.Run()'\n   - ELSE:\n     - Log 'Starting Orchestrator...'\n     - Call 'orchestrator.Run(config)'\n\nStrategy:\n- Do NOT delete 'cmd/setup/' yet. Keep it for reference/fallback.\n- Create NEW binary target in Bazel.\n\nVerification:\n- Run 'bazel run //cmd/machinator' in a fresh dir -\u003e Expect Setup TUI.\n- Run 'bazel run //cmd/machinator' in a configed dir -\u003e Expect Orchestrator TUI.\n\nSafety:\n- If Setup/Orchestrator packages are not exposed (private), STOP and create a Refactor task.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T09:05:03.879844-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:12:53.46111-05:00","closed_at":"2026-01-11T16:12:53.46111-05:00","close_reason":"Implemented unified machinator binary that automatically chooses between setup and orchestration based on .beads existence. Refactored both components into packages. Verified with E2E test harness.","dependencies":[{"issue_id":"machinator-90n","depends_on_id":"machinator-3ra","type":"blocked-by","created_at":"2026-01-11T09:05:03.883206-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-90n","depends_on_id":"machinator-3ra","type":"blocks","created_at":"2026-01-11T09:05:18.30379-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-91z","title":"Build: Create Bazel target for machinator-linux","description":"Goal: Create a proper Bazel target for the Linux cross-compiled machinator binary used by VHS Docker.\n\n=== CONTEXT ===\n\nThe unified binary will be called \"machinator\". For VHS Docker testing (which runs Linux), we need a Linux cross-compiled version called \"machinator-linux\".\n\nCurrently a binary called setup-tui-linux clutters the repo root. This should be replaced with a proper Bazel target.\n\n=== YOUR TASK ===\n\n1. Create or update BUILD file for the machinator binary with a Linux target:\n\n```starlark\n# In orchestrator/cmd/machinator/BUILD\ngo_binary(\n    name = \"machinator\",\n    embed = [\":machinator_lib\"],\n    visibility = [\"//visibility:public\"],\n)\n\ngo_binary(\n    name = \"machinator-linux\",\n    embed = [\":machinator_lib\"],\n    goos = \"linux\",\n    goarch = \"amd64\",\n    visibility = [\"//visibility:public\"],\n)\n```\n\n2. Update VHS tapes to use machinator-linux instead of setup-tui-linux\n\n3. Update scripts/vhs-docker.sh to:\n   - Build: bazel build //orchestrator/cmd/machinator:machinator-linux\n   - Copy binary to correct location for Docker mount\n\n4. Remove setup-tui-linux references and .gitignore entry\n\n5. Update AGENTS.md VHS instructions\n\nVerification:\n- bazel build //orchestrator/cmd/machinator:machinator-linux works\n- VHS tapes reference machinator-linux\n- Docker VHS workflow still works\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T21:35:55.399805-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:49:07.261275-05:00","closed_at":"2026-01-11T21:49:07.261275-05:00","close_reason":"Closed","comments":[{"id":9,"issue_id":"machinator-91z","author":"bryantinsley","text":"NOTE: After this task is complete, all .tape files will reference machinator-linux instead of setup-tui-linux. The old name is deprecated.","created_at":"2026-01-12T02:40:57Z"}]}
{"id":"machinator-9j8","title":"Chore: Add ttyd dependency check to dev_setup","description":"Goal: Ensure dev_setup script checks for ttyd and provides installation instructions.\n\nBackground:\nttyd is required by VHS for terminal GIF recording. It's a system-level dependency that must be installed via brew.\n\nSpecs:\n1. Find the dev_setup script (likely scripts/dev_setup.sh or similar)\n2. Add a check for ttyd:\n   if ! command -v ttyd \u0026\u003e /dev/null; then\n       echo \"‚ö†Ô∏è  ttyd not found. Install with: brew install ttyd\"\n       echo \"   ttyd is required for VHS terminal recording.\"\n   fi\n3. Add similar check for vhs if not already present\n\nVerification:\n- Uninstall ttyd temporarily and run dev_setup - should show warning\n- With ttyd installed, warning should not appear\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"chore","assignee":"Gemini-01","created_at":"2026-01-11T17:38:09.997181-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T18:12:30.277646-05:00","closed_at":"2026-01-11T18:12:30.277646-05:00","close_reason":"Closed"}
{"id":"machinator-9qz","title":"Chore: Clean up ttyd/vhs installation attempt artifacts","description":"Goal: Remove leftover files from agent attempts to manually install ttyd and vhs.\n\nBackground:\nPrevious agents tried to download and install ttyd/vhs binaries when they couldn't use brew. These artifacts are now unnecessary since the dependencies are installed system-wide.\n\nKnown cruft locations:\n- _archive/task-9yr-cleanup/ (entire directory with ttyd and vhs downloads)\n- vhs.tar.gz (root directory)\n- vhs_0.10.0_Darwin_arm64.tar.gz (root directory)\n- setup_go_env.sh (root directory - may be duplicate)\n- Any other orphaned .tar.gz or binary files\n\nSpecs:\n1. Move all cruft to _archive/ with a dated subfolder if not already there\n2. OR delete if clearly temporary download artifacts\n3. Check git status to ensure nothing important is lost\n\nVerification:\n- git status should be clean after cleanup\n- No stray .tar.gz files in root\n- _archive/task-9yr-cleanup can be removed if contents are no longer needed\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"chore","assignee":"Gemini-01","created_at":"2026-01-11T17:38:26.808953-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T18:20:27.401041-05:00","closed_at":"2026-01-11T18:20:27.401041-05:00","close_reason":"Closed"}
{"id":"machinator-9yr","title":"Fix: Generate Missing VHS GIFs","description":"Goal: Generate the missing VHS GIF recordings of the TUI.\n\n=== CONTEXT: VHS GIF Recording Workflow ===\n\nWe record terminal GIFs using VHS inside Docker (because VHS is incompatible with macOS sandbox):\n\n1. scripts/vhs-docker.sh runs: docker run --rm -v $PWD:/vhs ghcr.io/charmbracelet/vhs \u003ctape\u003e\n2. Docker mounts the repo at /vhs and runs Linux\n3. VHS reads the tape file which scripts keyboard inputs\n4. The tape executes ./setup-tui-linux (a Linux binary)\n5. VHS records the terminal output as a GIF\n\n=== PREREQUISITES (should be done) ===\n\n- setup-tui-linux must be an ELF Linux binary (not Mach-O)\n- Docker must be installed\n\n=== YOUR TASK ===\n\n1. Verify setup-tui-linux is Linux: file setup-tui-linux should show ELF\n2. Run the VHS tapes using Docker:\n   scripts/vhs-docker.sh orchestrator/e2e/navigation.tape\n   scripts/vhs-docker.sh orchestrator/e2e/crud.tape\n3. Verify GIFs were created:\n   ls -la docs/ui-history/*.gif\n\nVerification:\n- At least 2 GIF files in docs/ui-history/\n- Each GIF should be \u003e10KB\n\nCHALLENGE:simple","notes":"Blocked by missing system dependencies: ttyd and vhs. See newly created issue for details.","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:03.866261-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T19:41:25.828349-05:00","closed_at":"2026-01-11T19:41:25.828349-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-9yr","depends_on_id":"machinator-ctz","type":"blocks","created_at":"2026-01-11T17:09:30.471381-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-9yr","depends_on_id":"machinator-9j8","type":"blocks","created_at":"2026-01-11T18:05:39.301468-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-9yr","depends_on_id":"machinator-9qz","type":"blocks","created_at":"2026-01-11T18:05:39.530619-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-9yr","depends_on_id":"machinator-2y6","type":"blocks","created_at":"2026-01-11T18:40:13.029619-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-9yr","depends_on_id":"machinator-132","type":"blocks","created_at":"2026-01-11T18:51:54.828989-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-9zy","title":"VHS: Refactor tapes to use fixture directory","description":"Goal: Update VHS tapes to use a pre-configured fixture directory instead of echoing JSON.\n\n=== CONTEXT ===\n\nCurrent VHS tapes (crud.tape, navigation.tape) create test data by echoing JSON into files. This is fragile and verbose. Instead, we should:\n- Use a pre-made fixture directory (testdata/vhs-fixture/)\n- Copy it to a temp HOME at tape start\n- This matches how the TUI actually reads config\n\n=== YOUR TASK ===\n\n1. Create testdata/vhs-fixture/ with realistic test data:\n   - .machinator/projects/1/project.json (Demo Project)\n   - .machinator/projects/2/project.json (Another Project)\n   - .machinator/settings.json\n   - .machinator/gemini (mock binary)\n   - Mock bd binary that returns sensible data\n\n2. Update crud.tape and navigation.tape:\n   - Copy fixture dir to temp HOME\n   - Remove all the echo/mkdir commands\n   - Simpler, more maintainable\n\n3. Update scripts/vhs-docker.sh if needed to mount fixtures\n\nVerification:\n- VHS tapes are shorter and cleaner\n- Same visual output when run\n- Fixtures are version controlled\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:51:51.859003-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:28:13.821706-05:00","closed_at":"2026-01-11T23:28:13.821706-05:00","close_reason":"Closed","comments":[{"id":12,"issue_id":"machinator-9zy","author":"bryantinsley","text":"NOTE FROM BRYAN (via Claude): The bd stub in testdata/vhs-fixture/bin/bd just echoes []. For realistic VHS testing, either use the custom Docker image with real bd installed (see machinator-r1n), or make the mock return realistic fixture data.","created_at":"2026-01-12T04:28:12Z"}]}
{"id":"machinator-a0h","title":"Docs: Create concepts/how-it-works.md","description":"Goal: Create architecture overview doc for users.\n\n=== CONTEXT ===\n\nPer planning/documentation-strategy.md, we need docs/concepts/how-it-works.md.\n\n=== YOUR TASK ===\n\n1. Create docs/concepts/ directory\n2. Create how-it-works.md explaining:\n   - What Machinator does (orchestrates AI agents)\n   - The loop: fetch task ‚Üí build directive ‚Üí run Gemini ‚Üí complete\n   - Key concepts: beads, directives, quota\n   - Simple diagram (ASCII or mermaid)\n\n3. Keep it scannable (bullets, headers)\n4. Link from README \"Architecture\" section\n\nVerification:\n- File exists and is readable\n- Non-technical user can understand the basics\n- README links to it\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:44:11.488919-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:44:11.488919-05:00"}
{"id":"machinator-a2i","title":"Gov: Enforce UI Tests in Pre-commit","description":"Update scripts/hooks/pre-commit to run 'go test ./orchestrator/cmd/setup/...'. Fail commit if loose UI changes are detected without golden updates.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:40:25.482952-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:00:50.49801-05:00","closed_at":"2026-01-11T15:34:25.491189-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-a2i","depends_on_id":"machinator-xoz","type":"blocked-by","created_at":"2026-01-11T08:40:25.484406-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-a2i","depends_on_id":"machinator-xoz","type":"blocks","created_at":"2026-01-11T08:41:41.764211-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-amw","title":"VHS: Navigation Workflow Tape","description":"Create 'navigation.tape' which starts the TUI, moves arrow keys down/up, and verifies basic responsiveness. Output to docs/ui-history/navigation.gif.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:40:01.214077-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:01:01.893405-05:00","closed_at":"2026-01-11T13:21:50.157644-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-amw","depends_on_id":"machinator-azo","type":"blocked-by","created_at":"2026-01-11T08:40:01.216051-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-amw","depends_on_id":"machinator-azo","type":"blocks","created_at":"2026-01-11T08:41:41.156074-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-aw6","title":"GitHub Actions Blocked: Billing Issue","description":"GitHub Actions are failing with: 'The job was not started because your account is locked due to a billing issue.' This blocks all CI-based workflows including VHS generation.","status":"blocked","priority":0,"issue_type":"bug","assignee":"Gemini-01","created_at":"2026-01-11T21:10:47.603995-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:19:03.913365-05:00","comments":[{"id":8,"issue_id":"machinator-aw6","author":"bryantinsley","text":"Verified local fallback: Docker is available and setup-tui-linux build succeeds. Marking as blocked until Bryan resolves GitHub billing issue.","created_at":"2026-01-12T02:18:56Z"}]}
{"id":"machinator-awl","title":"Epic: CI-Gated VHS Testing Infrastructure","description":"Goal: Move VHS terminal recording from local Docker to GitHub Actions for reliability and speed.\n\n=== THE PROBLEM ===\n\nVHS (terminal GIF recorder) has compatibility issues on macOS:\n- VHS is incompatible with macOS sandbox-exec (blocks TTY operations)\n- Docker VHS works but is slow (~5 mins per tape on ARM Mac with x86 emulation)\n- Agents burn time waiting for slow Docker runs\n\n=== THE SOLUTION ===\n\nRun VHS in GitHub Actions on native Linux runners:\n1. Agent makes code changes\n2. Agent commits and pushes\n3. Agent creates a \"gate\" bead that waits for CI to complete\n4. Agent exits (no waiting!)\n5. GitHub Action runs VHS on Linux (fast, ~30 sec)\n6. CI completes, gate resolves\n7. Another agent session evaluates the result\n\nBenefits:\n- Native Linux VHS (no Docker overhead)\n- Agents dont wait for slow operations\n- No macOS sandbox issues\n- Keeps dev laptops cool\n\n=== SUBTASKS ===\n\n1. Create GitHub Action workflow for VHS\n2. Create gate-check script for orchestrator  \n3. Update AGENTS.md with CI-gated workflow instructions\n4. Update directive template with gate usage\n5. Test end-to-end flow\n\nCHALLENGE:complex","status":"blocked","priority":1,"issue_type":"epic","assignee":"Gemini-01","created_at":"2026-01-11T19:37:45.000174-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:12:40.344326-05:00","dependencies":[{"issue_id":"machinator-awl","depends_on_id":"machinator-aw6","type":"blocks","created_at":"2026-01-11T21:16:09.021518-05:00","created_by":"bryantinsley"}],"comments":[{"id":2,"issue_id":"machinator-awl","author":"bryantinsley","text":"[BLOCKED: HUMAN] GitHub Actions billing issue. DO NOT unblock until Bryan resolves billing.","created_at":"2026-01-12T02:12:56Z"}]}
{"id":"machinator-awl.1","title":"Infra: Create GitHub Action for VHS generation","description":"Goal: Create a GitHub Action workflow that runs VHS on native Linux.\n\n=== CONTEXT ===\n\nVHS runs slowly via Docker on macOS (~5 mins per tape). GitHub Actions provides free Linux runners where VHS runs natively and fast (~30 sec).\n\nThe workflow should:\n1. Trigger on push (when .tape files or TUI code changes)\n2. Build the Linux binary\n3. Run all VHS tapes\n4. Upload GIFs as artifacts\n5. Commit GIFs back to repo (optional) or make available for download\n\n=== YOUR TASK ===\n\n1. Create .github/workflows/vhs.yml:\n\nname: VHS Terminal Recording\non:\n  push:\n    paths:\n      - \"orchestrator/**\"\n      - \"**/*.tape\"\n  workflow_dispatch:\n\njobs:\n  record:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-go@v5\n        with:\n          go-version: \"1.21\"\n      - name: Install VHS\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y ffmpeg\n          go install github.com/charmbracelet/vhs@latest\n      - name: Build TUI\n        run: go build -o setup-tui-linux ./orchestrator/cmd/setup\n      - name: Run VHS tapes\n        run: |\n          vhs orchestrator/e2e/navigation.tape\n          vhs orchestrator/e2e/crud.tape\n      - name: Upload GIFs\n        uses: actions/upload-artifact@v4\n        with:\n          name: vhs-gifs\n          path: docs/ui-history/*.gif\n\n2. Test by pushing a change and verifying the action runs\n\nVerification:\n- Action appears in GitHub Actions tab\n- GIFs uploaded as artifacts\n\nCHALLENGE:simple","status":"blocked","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T19:38:05.91673-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:12:40.473431-05:00","dependencies":[{"issue_id":"machinator-awl.1","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T19:38:05.919818-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.1","depends_on_id":"machinator-aw6","type":"blocks","created_at":"2026-01-11T21:16:09.184714-05:00","created_by":"bryantinsley"}],"comments":[{"id":1,"issue_id":"machinator-awl.1","author":"bryantinsley","text":"Unblocked. Note: .github/workflows/vhs.yml already exists. Please verify if it meets the requirements for 'Create GitHub Action' and close this task if appropriate, or refine as needed.","created_at":"2026-01-12T02:04:31Z"},{"id":3,"issue_id":"machinator-awl.1","author":"bryantinsley","text":"[BLOCKED: HUMAN] GitHub Actions billing issue. DO NOT auto-unblock. Only Bryan can unblock after billing is fixed.","created_at":"2026-01-12T02:13:42Z"}]}
{"id":"machinator-awl.2","title":"Infra: Add gate-check to orchestrator","description":"Goal: Add periodic gate checking to the bootstrap orchestrator.\n\n=== CONTEXT ===\n\nBeads has a gate system for async coordination. Gates can wait for external events like GitHub workflow completion (gh:run type). The orchestrator needs to periodically check and resolve gates.\n\nThe workflow:\n1. Agent commits code, creates a gate waiting for CI\n2. Agent exits\n3. CI runs VHS on GitHub\n4. Gate-check script (run by orchestrator) polls GitHub, resolves gate when CI completes\n5. Dependent tasks unblock\n\n=== YOUR TASK ===\n\n1. Create bootstrap/check_gates.sh:\n\n#!/bin/bash\n# Check and resolve GitHub workflow gates\n# Run every 5 minutes from the orchestrator\n\n# Check for open gates\nOPEN_GATES=$(bd gate list --json 2\u003e/dev/null | jq -r \".[] | select(.status == \\\"open\\\")\")\n\nif [ -z \"$OPEN_GATES\" ]; then\n    exit 0\nfi\n\n# Use bd gate check to evaluate gates\nbd gate check --type=gh:run 2\u003e/dev/null || true\n\n2. Modify orchestrator_with_quota.sh to call check_gates.sh every 5 cycles:\n\n# Add near the top of the main loop:\nif [ $((count % 5)) -eq 0 ]; then\n    ./bootstrap/check_gates.sh\nfi\n\nVerification:\n- check_gates.sh runs without error\n- bd gate list shows gates being checked\n\nCHALLENGE:simple","status":"blocked","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T19:38:23.709132-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:12:40.610061-05:00","dependencies":[{"issue_id":"machinator-awl.2","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T19:38:23.710306-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.2","depends_on_id":"machinator-awl.1","type":"blocks","created_at":"2026-01-11T19:38:23.711718-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.2","depends_on_id":"machinator-aw6","type":"blocks","created_at":"2026-01-11T21:16:09.351247-05:00","created_by":"bryantinsley"}],"comments":[{"id":4,"issue_id":"machinator-awl.2","author":"bryantinsley","text":"[BLOCKED: HUMAN] GitHub Actions billing issue. DO NOT auto-unblock. Only Bryan can unblock after billing is fixed.","created_at":"2026-01-12T02:13:43Z"}]}
{"id":"machinator-awl.3","title":"Docs: Update AGENTS.md with CI-gated workflow","description":"Goal: Document the CI-gated workflow in AGENTS.md so agents know how to use it.\n\n=== CONTEXT ===\n\nFor slow operations (VHS recording, expensive tests), agents should use the CI-gated workflow:\n1. Make changes and commit\n2. Create a gate that waits for CI\n3. Exit immediately (dont wait)\n4. The gate automatically resolves when CI completes\n5. Next agent session can evaluate the result\n\nThis avoids agents sitting idle waiting for slow Docker operations.\n\n=== YOUR TASK ===\n\nAdd a new section to AGENTS.md after \"System-Wide Installations\":\n\n## CI-Gated Operations\n\nSome operations run faster on CI than locally:\n- VHS terminal recording (uses Docker locally, native Linux on CI)\n- Heavy test suites\n\nFor these operations, use the CI-gated workflow:\n\n1. **Make your changes** and commit:\n   git add -A \u0026\u0026 git commit -m \"feat: update TUI layout\" \u0026\u0026 git push\n\n2. **Create a gate** that waits for the CI workflow:\n   bd create --type=gate --title=\"Wait for VHS CI\" --external-ref=\"gh:run:vhs\"\n\n3. **Link your follow-up task** to the gate:\n   bd dep add \u003cfollow-up-task\u003e \u003cgate-id\u003e\n\n4. **Exit immediately** - the orchestrator will check gates periodically\n\n5. **When CI completes**, the gate resolves and the follow-up task unblocks\n\nThis keeps your laptop cool and your quota efficient!\n\nVerification:\n- Section appears in AGENTS.md\n- Instructions are clear and complete\n\nCHALLENGE:simple","status":"blocked","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T19:38:42.336624-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:12:40.784111-05:00","dependencies":[{"issue_id":"machinator-awl.3","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T19:38:42.343402-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.3","depends_on_id":"machinator-awl.2","type":"blocks","created_at":"2026-01-11T19:38:42.345142-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.3","depends_on_id":"machinator-aw6","type":"blocks","created_at":"2026-01-11T21:16:09.526223-05:00","created_by":"bryantinsley"}],"comments":[{"id":5,"issue_id":"machinator-awl.3","author":"bryantinsley","text":"[BLOCKED: HUMAN] GitHub Actions billing issue. DO NOT auto-unblock. Only Bryan can unblock after billing is fixed.","created_at":"2026-01-12T02:13:43Z"}]}
{"id":"machinator-awl.4","title":"Docs: Update directive template with gate protocol","description":"Goal: Add CI-gated workflow protocol to the directive template.\n\n=== CONTEXT ===\n\nThe directive template (bootstrap/directive_template.txt) tells agents the protocols to follow. Agents need to know about the CI-gated workflow for slow operations.\n\n=== YOUR TASK ===\n\nAdd a new protocol to bootstrap/directive_template.txt after PROTOCOL: FAILURE \u0026 BLOCKING:\n\n6. **PROTOCOL: CI-GATED OPERATIONS**\n   - For slow operations (VHS, heavy tests), use CI instead of running locally\n   - Workflow:\n     1. Commit and push your changes\n     2. Create a gate: bd create --type=gate --title=\"Wait for CI\" --external-ref=\"gh:run:vhs\"\n     3. Create follow-up task blocked by the gate\n     4. Exit immediately - dont wait for CI\n     5. The system will resume when CI completes\n   - See AGENTS.md \"CI-Gated Operations\" for details\n\nAlso update the REMINDER section at the bottom to mention:\n- If you created a gate, ensure you created a follow-up task blocked by it\n\nVerification:\n- Protocol 6 appears in directive_template.txt\n- REMINDER section updated\n\nCHALLENGE:simple","status":"blocked","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T19:38:57.438023-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:12:40.929553-05:00","dependencies":[{"issue_id":"machinator-awl.4","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T19:38:57.438943-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.4","depends_on_id":"machinator-awl.3","type":"blocks","created_at":"2026-01-11T19:38:57.440136-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.4","depends_on_id":"machinator-aw6","type":"blocks","created_at":"2026-01-11T21:16:09.687798-05:00","created_by":"bryantinsley"}],"comments":[{"id":6,"issue_id":"machinator-awl.4","author":"bryantinsley","text":"[BLOCKED: HUMAN] GitHub Actions billing issue. DO NOT auto-unblock. Only Bryan can unblock after billing is fixed.","created_at":"2026-01-12T02:13:43Z"}]}
{"id":"machinator-awl.5","title":"Test: End-to-end CI-gated VHS workflow","description":"Goal: Test the complete CI-gated VHS workflow end-to-end.\n\n=== CONTEXT ===\n\nWe have set up:\n- GitHub Action for VHS (machinator-awl.1)\n- Gate-check in orchestrator (machinator-awl.2)\n- AGENTS.md documentation (machinator-awl.3)\n- Directive template protocol (machinator-awl.4)\n\nNow we need to verify it all works together.\n\n=== YOUR TASK ===\n\n1. Make a small change to a tape file (add a comment):\n   echo \"# Test comment $(date)\" \u003e\u003e orchestrator/e2e/navigation.tape\n\n2. Commit and push:\n   git add -A \u0026\u0026 git commit -m \"test: verify CI-gated VHS\" \u0026\u0026 git push\n\n3. Create a gate:\n   bd create --type=gate --title=\"Wait for VHS CI test\" --external-ref=\"gh:run:vhs\"\n\n4. Create evaluation task blocked by gate:\n   bd create --type=task --title=\"Evaluate: VHS CI test results\" --deps=\u003cgate-id\u003e\n\n5. Verify:\n   - GitHub Actions shows VHS workflow running\n   - Gate shows in bd gate list\n   - Gate resolves when CI completes (check after a few minutes)\n   - Evaluation task unblocks\n\n6. If successful, close this task\n   If failed, document what went wrong in a comment\n\nCHALLENGE:simple","status":"blocked","priority":1,"issue_type":"task","created_at":"2026-01-11T19:39:15.671351-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:12:41.072066-05:00","dependencies":[{"issue_id":"machinator-awl.5","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T19:39:15.675354-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.5","depends_on_id":"machinator-awl.4","type":"blocks","created_at":"2026-01-11T19:39:15.681119-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.5","depends_on_id":"machinator-aw6","type":"blocks","created_at":"2026-01-11T21:16:09.85356-05:00","created_by":"bryantinsley"}],"comments":[{"id":7,"issue_id":"machinator-awl.5","author":"bryantinsley","text":"[BLOCKED: HUMAN] GitHub Actions billing issue. DO NOT auto-unblock. Only Bryan can unblock after billing is fixed.","created_at":"2026-01-12T02:13:43Z"}]}
{"id":"machinator-awl.6","title":"Wait for VHS CI","status":"open","priority":2,"issue_type":"gate","created_at":"2026-01-11T21:07:05.124531-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:07:05.124531-05:00","external_ref":"gh:run:vhs","dependencies":[{"issue_id":"machinator-awl.6","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T21:07:05.127794-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-awl.7","title":"Verify VHS CI Result","description":"Check if the VHS workflow ran successfully and committed the GIF.","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-11T21:07:25.866954-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:07:54.401336-05:00","dependencies":[{"issue_id":"machinator-awl.7","depends_on_id":"machinator-awl","type":"parent-child","created_at":"2026-01-11T21:07:25.867886-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-awl.7","depends_on_id":"machinator-awl.6","type":"blocks","created_at":"2026-01-11T21:07:36.553187-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-azo","title":"VHS: Setup Tape Infrastructure","description":"Create orchestrator/e2e/ directory. Add a simple check-vhs.sh script to ensure the tool is available. Add .gitignore for temporary tape outputs.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:39:56.226876-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:01:05.418524-05:00","closed_at":"2026-01-11T13:19:23.94697-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-azo","depends_on_id":"machinator-2qe","type":"blocked-by","created_at":"2026-01-11T08:39:56.229144-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-azo","depends_on_id":"machinator-2qe","type":"blocks","created_at":"2026-01-11T08:41:40.999461-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-b4h","title":"VHS: Project CRUD Tape","description":"Create 'crud.tape' illustrating checking project details, entering edit mode, and canceling delete. Output to docs/ui-history/crud.gif.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:40:10.673685-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:00:58.595498-05:00","closed_at":"2026-01-11T13:24:38.921306-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-b4h","depends_on_id":"machinator-amw","type":"blocked-by","created_at":"2026-01-11T08:40:10.675785-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-b4h","depends_on_id":"machinator-amw","type":"blocks","created_at":"2026-01-11T08:41:41.31671-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-cd1","title":"QA: Verify VHS GIFs show working features","description":"Goal: Review regenerated GIFs for quality and correctness.\n\n=== FRESHNESS CHECK ===\n\nFIRST: Verify GIFs are FRESH (committed after 1am EST Jan 12, 2026):\n  git log --oneline -1 -- docs/ui-history/*.gif\n\nIf GIFs are older than that, this task is NOT ready - re-block on ydu.\n\n=== QUALITY REVIEW ===\n\nFor each GIF in docs/ui-history/, check:\n\n1. **Functionality** - Features work correctly\n   - crud.gif: rename actually saves\n   - navigation.gif: moves through screens smoothly\n\n2. **Visual Quality** - Not ugly or broken rendering\n   - Text is readable, not garbled\n   - Colors are correct\n   - No visual artifacts or glitches\n   - Proper alignment and spacing\n   - Animations smooth, not janky\n\n3. **Polish** - Looks professional\n   - Window size appropriate\n   - Font size readable\n   - Timing feels natural\n\n=== IF ISSUES FOUND ===\n\nCreate specific bug task for each issue found. Block this task on those bugs.\n\n=== IF ALL GOOD ===\n\nUpdate README if GIFs changed, close this task.\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:44:01.068927-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:45:52.655725-05:00","dependencies":[{"issue_id":"machinator-cd1","depends_on_id":"machinator-ydu","type":"blocks","created_at":"2026-01-12T00:44:01.089027-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-ctz","title":"Setup: Add local bin to PATH in directive template","description":"Goal: Update the directive template so agents have .go-cache/bin in their PATH.\n\nSpecs:\n1. Edit bootstrap/directive_template.txt\n2. In the ENVIRONMENT SETUP section, after the Go cache exports, add:\n   export PATH=\"$(pwd)/.go-cache/bin:$PATH\"\n\n3. This ensures vhs and ttyd are available when agents run commands.\n\nVerification:\n- grep PATH bootstrap/directive_template.txt should show the new export\n- The directive template should be valid (no syntax errors)\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T17:08:40.628617-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T17:43:14.147601-05:00","closed_at":"2026-01-11T17:43:14.147601-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-ctz","depends_on_id":"machinator-43q","type":"blocks","created_at":"2026-01-11T17:08:40.629991-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-ctz","depends_on_id":"machinator-4e9","type":"blocks","created_at":"2026-01-11T17:08:40.631305-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-dgj","title":"Feat: Implement Gemini Account Pooling","description":"Goal: Implement account pooling to aggregate quota from multiple Gemini accounts.\n\n=== CONTEXT: Phase 4 Full Integration ===\n\nPer planning/architecture-vision.md Section 8:\nTo run multiple agents efficiently, we need to pool quota across multiple Gemini accounts.\n\nDesign:\n- Pool of isolated configs in ~/.machinator/accounts/\n- Different API keys per account\n- Round-robin rotation to aggregate quota\n- Prevents pollution of primary users ~/.gemini\n\n=== YOUR TASK ===\n\n1. Create orchestrator/pkg/accountpool/ package\n2. Implement AccountPool:\n   - Load accounts from ~/.machinator/accounts/*.json\n   - Each account has: name, api_key, gemini_dir\n   - Track quota usage per account\n   - NextAvailable() returns account with quota remaining\n3. Integrate with orchestrator to select account before launching agent\n4. Add config option to enable/disable pooling\n\nVerification:\n- Can create multiple account configs\n- Pool rotates through accounts\n- Exhausted accounts are skipped\n\nCHALLENGE:complex","status":"blocked","priority":3,"issue_type":"feature","created_at":"2026-01-11T21:20:29.265229-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:43:57.710716-05:00","dependencies":[{"issue_id":"machinator-dgj","depends_on_id":"machinator-wtz","type":"blocks","created_at":"2026-01-11T21:20:29.267613-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-dgj.1","title":"Pool: Create accountpool package structure","description":"Goal: Create the account pool package with HOME-based isolation.\n\n=== CONTEXT ===\n\nGemini CLI reads auth from $HOME/.gemini. To pool accounts, each account needs its own fake HOME directory with a .gemini folder inside.\n\nStructure:\n~/.machinator/accounts/\n  default/              \u003c- fake HOME for default account\n    .gemini/            \u003c- gemini auth lives here\n    account.json        \u003c- name, auth_type (api_key or google)\n  work/\n    .gemini/\n    account.json\n\n=== YOUR TASK ===\n\n1. Create orchestrator/pkg/accountpool/\n2. Create types.go:\n\n```go\npackage accountpool\n\ntype AuthType string\nconst (\n    AuthTypeAPIKey   AuthType = \"api_key\"\n    AuthTypeGoogle   AuthType = \"google\"\n)\n\ntype Account struct {\n    Name     string   `json:\"name\"`\n    AuthType AuthType `json:\"auth_type\"`\n    HomeDir  string   // Full path to fake HOME (e.g., ~/.machinator/accounts/default)\n}\n\ntype Pool struct {\n    accounts  []Account\n    exhausted map[string]time.Time  // Track exhausted accounts\n}\n\nfunc NewPool() *Pool\nfunc (p *Pool) Add(a Account)\n```\n\n3. Create basic test\n\nVerification:\n- Package compiles\n- Account.HomeDir contains path to fake home\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:43:05.636757-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:47:42.733799-05:00","closed_at":"2026-01-11T22:47:42.733799-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-dgj.1","depends_on_id":"machinator-dgj","type":"parent-child","created_at":"2026-01-11T22:43:05.638025-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-dgj.2","title":"Pool: Load accounts from disk","description":"Goal: Load account configs from ~/.machinator/accounts/\n\n=== YOUR TASK ===\n\n1. Add to accountpool package:\n\n```go\nfunc LoadAccounts(machinatorDir string) ([]Account, error) {\n    accountsDir := filepath.Join(machinatorDir, \"accounts\")\n    // Read each subdirectory\n    // Load account config from each\n    // Return list of valid accounts\n}\n\nfunc (p *Pool) LoadFromDir(machinatorDir string) error\n```\n\n2. Account config format (JSON in each account dir):\n   - ~/.machinator/accounts/default/account.json\n   - ~/.machinator/accounts/work/account.json\n\n3. Merge with existing accounts.go in setup pkg if applicable\n\nVerification:\n- Can load accounts from disk\n- Handles missing/invalid accounts gracefully\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:43:20.489502-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:53:55.242657-05:00","closed_at":"2026-01-11T22:53:55.242657-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-dgj.2","depends_on_id":"machinator-dgj","type":"parent-child","created_at":"2026-01-11T22:43:20.491598-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-dgj.2","depends_on_id":"machinator-dgj.1","type":"blocks","created_at":"2026-01-11T22:43:20.493042-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-dgj.3","title":"Pool: Implement NextAvailable rotation","description":"Goal: Implement round-robin account selection with quota checking.\n\n=== YOUR TASK ===\n\n1. Add to accountpool package:\n\n```go\nfunc (p *Pool) NextAvailable() (*Account, error) {\n    // Round-robin through accounts\n    // Check quota for each\n    // Return first account with available quota\n    // Return error if all exhausted\n}\n\nfunc (p *Pool) MarkExhausted(name string) {\n    // Mark account as temporarily exhausted\n}\n\nfunc (p *Pool) ResetQuota() {\n    // Reset exhausted status (call periodically)\n}\n```\n\n2. Use the quota check logic from orchestrator/pkg/orchestrator/quota_check.go\n\nVerification:\n- NextAvailable rotates through accounts\n- Exhausted accounts are skipped\n- Returns error when all exhausted\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:43:34.354967-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:07:18.05633-05:00","closed_at":"2026-01-11T23:07:18.05633-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-dgj.3","depends_on_id":"machinator-dgj","type":"parent-child","created_at":"2026-01-11T22:43:34.356415-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-dgj.3","depends_on_id":"machinator-dgj.2","type":"blocks","created_at":"2026-01-11T22:43:34.357981-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-dgj.4","title":"Pool: Integrate with orchestrator TUI","description":"Goal: Wire up account pool to the orchestrator with HOME override.\n\n=== CONTEXT ===\n\nTo use a specific account, launch Gemini with HOME pointing to that accounts fake home directory.\n\n=== YOUR TASK ===\n\n1. Update orchestrator/pkg/orchestrator/tui.go:\n   - Load account pool at startup\n   - Before launching Gemini, call pool.NextAvailable()\n   - Set HOME env var: cmd.Env = append(os.Environ(), \"HOME=\"+account.HomeDir)\n   - Mark account exhausted if quota error occurs\n\n2. Add config option to enable/disable pooling:\n   - If only 1 account, behave as before\n   - If multiple accounts, use pool rotation\n\n3. Update TUI display to show which account is active\n\nVerification:\n- Gemini runs with correct HOME for selected account\n- With 1 account: works as before\n- With multiple accounts: rotates correctly\n- TUI shows current account name\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:43:47.155075-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:18:25.08285-05:00","closed_at":"2026-01-11T23:18:25.08285-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-dgj.4","depends_on_id":"machinator-dgj","type":"parent-child","created_at":"2026-01-11T22:43:47.158794-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-dgj.4","depends_on_id":"machinator-dgj.3","type":"blocks","created_at":"2026-01-11T22:43:47.161543-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-dgj.5","title":"Pool: Account setup wizard in TUI","description":"Goal: Add TUI flow for setting up new accounts.\n\n=== CONTEXT ===\n\nWhen adding a new account:\n- API Key auth: User pastes key, we write it to .gemini/settings.json\n- Google auth: User must run gemini auth manually in that HOME\n\n=== YOUR TASK ===\n\n1. Add to setup TUI a \"Manage Accounts\" option\n2. For new account:\n   a. Ask for account name\n   b. Create ~/.machinator/accounts/\u003cname\u003e/\n   c. Create .gemini/ subdirectory\n   d. Ask auth type: API Key or Google\n   e. If API Key: prompt for key, write to .gemini/settings.json\n   f. If Google: show instructions to run:\n      HOME=~/.machinator/accounts/\u003cname\u003e gemini auth\n   g. Save account.json with metadata\n\n3. List existing accounts with status (authenticated or not)\n\nVerification:\n- Can add new account via TUI\n- API key accounts work immediately\n- Google auth shows correct instructions\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:45:36.553081-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:22:53.401316-05:00","closed_at":"2026-01-11T23:22:53.401316-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-dgj.5","depends_on_id":"machinator-dgj","type":"parent-child","created_at":"2026-01-11T22:45:36.553856-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-dgj.5","depends_on_id":"machinator-dgj.2","type":"blocks","created_at":"2026-01-11T22:45:36.555292-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-doh","title":"Chore: Archive standalone setup binary","description":"Goal: Clean up the separate setup binary now that we have unified binary.\n\n=== CONTEXT ===\n\norchestrator/cmd/setup/ is a standalone setup binary that is no longer needed since machinator handles both modes.\n\n=== YOUR TASK ===\n\n1. Move orchestrator/cmd/setup/ to _archive/cmd-setup-legacy/\n2. Update any references in docs\n3. Verify bazel run //:machinator -- --setup still works\n\nDO NOT DELETE - move to _archive/.\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:49:21.861098-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:49:21.861098-05:00"}
{"id":"machinator-dq2","title":"Feat: MACHINATOR_DIR Environment Variable","description":"Goal: Support MACHINATOR_DIR env var for custom config directory.\n\nSpecs:\n1. Create helper function 'GetMachinatorDir() string' in orchestrator/pkg/setup/config.go\n2. Logic: if MACHINATOR_DIR is set, use it. Otherwise default to ~/.machinator\n3. Update ALL references to ~/.machinator to use this helper.\n\nFiles to update:\n- orchestrator/pkg/setup/config.go (add helper)\n- orchestrator/pkg/setup/model.go (use helper)\n- orchestrator/cmd/machinator/main.go (use helper)\n\nVerification:\n- MACHINATOR_DIR=/tmp/test-mach go run orchestrator/cmd/setup/main.go\n- Assert: /tmp/test-mach directory is created (not ~/.machinator)\n\nSafety:\n- If more than 5 files need updating, STOP and create subtasks.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:12.164354-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T17:21:59.625675-05:00","closed_at":"2026-01-11T17:21:59.625675-05:00","close_reason":"Feature already implemented and verified. Helper function GetMachinatorDir() is used in orchestrator/pkg/setup/model.go and orchestrator/cmd/machinator/main.go. Verified with custom test program."}
{"id":"machinator-ec8","title":"TUI: Golden File Infrastructure","description":"Enhance main_test.go to support proper Golden File testing using teatest.\nTasks:\n- Refactor main_test.go to use teatest.RequireEqualOutput.\n- Generate initial golden files for: Main Screen, Project Detail, Edit Modal, Agent Count, Delete Confirmation.\n- Verify 'go test -update' workflow works.\nReference: .agent/plans/ui-testing-strategy.md","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-11T08:37:44.360596-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T08:39:33.773466-05:00","deleted_at":"2026-01-11T08:39:33.773466-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"machinator-em7","title":"Test: Fixture Repo Generator","description":"Goal: Script to generate a temporary git repo with valid Beads state.\n\nFile: 'tools/fixture-gen/main.go'\n\nSpecs:\n1. Function 'GenerateFixture(path string)'\n2. Runs 'git init' in target path.\n3. Creates '.beads/beads.db' (sqlite) and '.beads/beads.jsonl'.\n4. Populates DB with a known graph:\n   - 'bead-1' (Open)\n   - 'bead-2' (Blocked by bead-1)\n5. Commits everything to git.\n\nVerification:\n- Run tool -\u003e produces a dir.\n- Run 'bd list' inside that dir -\u003e shows beads.\n\nSafety:\n- Do NOT use real user bead DB. Use a temp path.\n- If sqlite drivers fail, STOP.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T09:04:47.730605-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:00:38.976991-05:00","closed_at":"2026-01-11T15:47:38.809785-05:00","close_reason":"Implemented fixture-gen tool in Go. Verified it creates a valid Git+Beads repository with bead-1 and bead-2 (blocked by bead-1). Added Bazel BUILD file.","dependencies":[{"issue_id":"machinator-em7","depends_on_id":"machinator-2jd","type":"blocked-by","created_at":"2026-01-11T09:04:47.732496-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-em7","depends_on_id":"machinator-2jd","type":"blocks","created_at":"2026-01-11T09:05:17.844123-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-g6d","title":"TUI: Governance \u0026 Documentation","description":"Codify rules and scripts.\nTasks:\n- Update AGENTS.md with 'Visual Evidence' rules.\n- Create scripts/update-ui-artifacts.sh.\n- Update scripts/hooks/pre-commit to run tests.\nReference: .agent/plans/ui-testing-strategy.md","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-11T08:38:09.58154-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T08:39:33.773466-05:00","deleted_at":"2026-01-11T08:39:33.773466-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"machinator-g79","title":"Test: Run E2E Harness and Fix Failures","description":"Goal: Verify the E2E test harness actually passes.\n\nSpecs:\n1. Run: go test ./orchestrator/e2e/... -v\n2. If tests fail, debug and fix the issues.\n3. Ensure the test uses dummy-gemini in AUTO_CLOSE mode properly.\n\nVerification:\n- go test ./orchestrator/e2e/... -v exits with code 0\n- Output shows 'bead-1 is closed'\n\nSafety:\n- If tests require \u003e30 seconds, that's expected (current timeout is 60s).\n- If fixture-gen fails, check bd CLI compatibility first.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:48.936056-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T20:47:10.047877-05:00","closed_at":"2026-01-11T20:47:10.047877-05:00","close_reason":"Closed"}
{"id":"machinator-i34","title":"Epic: Unified Bazel Test Infrastructure","description":"Goal: Make bazel test //... the single command to run all tests.\n\n=== VISION ===\n\nOne command to rule them all:\n  bazel test //...\n\nThis should:\n- Build all dependencies automatically\n- Run Go unit tests\n- Run golden file comparisons\n- Validate VHS tapes (if binaries match)\n- Run E2E tests with fixtures\n- Report clear pass/fail\n\n=== CURRENT STATE ===\n\n- Go tests: go test ./...  (not integrated)\n- Golden tests: scattered, manual\n- VHS: Docker-based, CI-gated\n- E2E: fixture-based harness exists\n\n=== DESIRED STATE ===\n\n```\nbazel test //...                              # Everything\nbazel test //orchestrator/...                 # All orchestrator tests\nbazel test //orchestrator/pkg/setup:setup_test  # Specific test\nbazel test //orchestrator/e2e:all             # All E2E tests\n```\n\nCHALLENGE:complex","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-12T01:04:36.584382-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:04:36.584382-05:00"}
{"id":"machinator-i34.1","title":"Bazel: Add go_test rules to all packages","description":"Goal: Add go_test BUILD rules so unit tests run via Bazel.\n\n=== YOUR TASK ===\n\n1. For each package with *_test.go files, ensure BUILD has:\n\n```starlark\ngo_test(\n    name = \"package_test\",\n    srcs = [\"foo_test.go\", \"bar_test.go\"],\n    embed = [\":package_lib\"],\n    deps = [...],\n)\n```\n\n2. Check these directories:\n   - orchestrator/pkg/setup/\n   - orchestrator/pkg/orchestrator/\n   - orchestrator/pkg/ui/components/\n   - orchestrator/pkg/accountpool/\n   - tools/dummy-gemini/\n\n3. Run: bazel test //orchestrator/... and fix any issues\n\nVerification:\n- bazel test //orchestrator/... passes\n- All existing Go tests are covered\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T01:04:52.87139-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:04:52.87139-05:00","dependencies":[{"issue_id":"machinator-i34.1","depends_on_id":"machinator-i34","type":"parent-child","created_at":"2026-01-12T01:04:52.872994-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-i34.2","title":"Bazel: Create golden_test rule for UI testing","description":"Goal: Create a Bazel rule for golden file comparisons.\n\n=== YOUR TASK ===\n\n1. Create a custom Bazel rule or macro for golden tests:\n\n```starlark\n# testing/golden.bzl\ndef golden_test(name, binary, golden_file, args = []):\n    # Run binary, compare output to golden_file\n    # Fail if different\n```\n\n2. Usage:\n```starlark\ngolden_test(\n    name = \"main_screen_golden\",\n    binary = \"//orchestrator/cmd/setup\",\n    golden_file = \"testdata/main_screen.golden\",\n    args = [\"--headless\"],\n)\n```\n\n3. Add helper to update goldens: bazel run //testing:update_goldens\n\nVerification:\n- Golden tests run via bazel test\n- Mismatch produces clear diff\n- Can update goldens easily\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T01:05:14.830364-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:05:14.830364-05:00","dependencies":[{"issue_id":"machinator-i34.2","depends_on_id":"machinator-i34","type":"parent-child","created_at":"2026-01-12T01:05:14.831163-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-i34.2","depends_on_id":"machinator-i34.1","type":"blocks","created_at":"2026-01-12T01:05:14.83254-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-i34.3","title":"Bazel: Create E2E test target with fixtures","description":"Goal: Run E2E tests via Bazel with auto-built binary deps.\n\n=== KEY INSIGHT ===\n\nBazel data deps auto-build binaries. No scripts needed:\n\n```starlark\ngo_test(\n    name = \"e2e_test\",\n    srcs = [\"e2e_test.go\"],\n    data = [\n        \"//tools/dummy-gemini:dummy-gemini-linux\",      # Auto-built\n        \"//orchestrator/cmd/machinator:machinator-linux\", # Auto-built\n        \"//testdata/fixture-repo:files\",\n    ],\n)\n```\n\nWhen you run bazel test //orchestrator/e2e:e2e_test:\n1. Bazel builds dummy-gemini-linux (if needed)\n2. Bazel builds machinator-linux (if needed)\n3. Copies them to runfiles\n4. Runs the test\n\n=== YOUR TASK ===\n\n1. Create orchestrator/e2e/BUILD with:\n   - data deps for dummy-gemini-linux and machinator-linux\n   - data deps for fixture files\n\n2. In e2e_test.go, access binaries via runfiles:\n   - os.Getenv(\"RUNFILES_DIR\") + path\n   - Or use bazel rules_go runfiles helper\n\n3. Test verifies task lifecycle with dummy-gemini\n\nVerification:\n- bazel test //orchestrator/e2e:e2e_test works\n- Binaries are built automatically\n- No manual build steps needed\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T01:05:30.477151-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:05:51.037257-05:00","dependencies":[{"issue_id":"machinator-i34.3","depends_on_id":"machinator-i34","type":"parent-child","created_at":"2026-01-12T01:05:30.478028-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-i34.3","depends_on_id":"machinator-i34.1","type":"blocks","created_at":"2026-01-12T01:05:30.479447-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-i34.4","title":"Bazel: VHS test with auto-built deps","description":"Goal: Run VHS validation via Bazel with auto-built Linux binaries.\n\n=== YOUR TASK ===\n\n1. Create VHS validation test in Bazel:\n\n```starlark\nsh_test(\n    name = \"vhs_validation\",\n    srcs = [\"run_vhs.sh\"],\n    data = [\n        \"//orchestrator/cmd/machinator:machinator-linux\",\n        \"//tools/dummy-gemini:dummy-gemini-linux\",\n        \"//testdata/vhs-fixture:files\",\n        \"//orchestrator/e2e:crud.tape\",\n    ],\n)\n```\n\n2. Bazel will:\n   - Build machinator-linux automatically\n   - Build dummy-gemini-linux automatically\n   - Make them available in runfiles\n\n3. run_vhs.sh invokes VHS Docker with the built binaries\n\n4. (May need to skip on macOS, run on Linux CI only)\n\nVerification:\n- bazel test //orchestrator/e2e:vhs_validation works (on Linux)\n- Binaries built automatically as deps\n- No pre-build scripts needed\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T01:06:09.102848-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:06:09.102848-05:00","dependencies":[{"issue_id":"machinator-i34.4","depends_on_id":"machinator-i34","type":"parent-child","created_at":"2026-01-12T01:06:09.103682-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-i34.4","depends_on_id":"machinator-i34.3","type":"blocks","created_at":"2026-01-12T01:06:09.105076-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-jry","title":"Feat: Gemini CLI Installation Panel","description":"Goal: Add a TUI panel that blocks orchestration until the specialized Gemini CLI is installed.\n\nSpecs:\n1. New view in orchestrator pkg: 'ToolsView' or similar.\n2. On startup, check if 'gemini --version' returns expected custom version.\n3. If missing/wrong version, show panel with:\n   - Status message: 'Gemini CLI not found or outdated'\n   - Instructions to install\n   - Button to run installation script\n4. Block navigation to Orchestrator until check passes.\n\nFiles:\n- orchestrator/pkg/orchestrator/tools_check.go (new)\n- orchestrator/pkg/orchestrator/tui.go (integrate check on Init)\n\nVerification:\n- Remove gemini from PATH, run machinator, verify it blocks with install prompt.\n- Install gemini, re-run, verify orchestrator loads.\n\nSafety:\n- Do NOT auto-run installations without user confirmation in TUI.\n- If the check logic is complex, split into subtasks.\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:24.114759-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T20:22:36.820688-05:00","closed_at":"2026-01-11T20:22:36.820688-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-jry","depends_on_id":"machinator-dq2","type":"blocks","created_at":"2026-01-11T16:40:10.258874-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-khr","title":"Arch: Design worktree lifecycle strategy","description":"Goal: Add worktree_strategy config to project.json.\n\n=== YOUR TASK ===\n\n1. Add to project config struct (orchestrator/pkg/setup/):\n\n```go\ntype ProjectConfig struct {\n    // ... existing fields\n    WorktreeStrategy string `json:\"worktree_strategy\"` // \"per-task\", \"per-invocation\", \"persistent\"\n}\n```\n\n2. Default value: \"per-invocation\"\n\n3. Update planning/directory-structure.md to document:\n   - per-task: Fresh worktree every task (clean but loses uncommitted work)\n   - per-invocation: Reset on new task, keep on retry (default)\n   - persistent: Never auto-reset\n\n4. Add validation: must be one of the three values\n\nVerification:\n- Config loads with worktree_strategy field\n- Defaults to \"per-invocation\" if missing\n- Invalid values rejected\n\nCHALLENGE:simple","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:56:51.559074-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:57:40.811844-05:00"}
{"id":"machinator-l3d","title":"Chore: Clean up bootstrap/ directory","description":"Goal: Archive or remove legacy bootstrap scripts that are replaced by Go TUI.\n\n=== CONTEXT ===\n\nThe Go TUI (orchestrator/) has replaced most bootstrap/ functionality. Clean up what is no longer needed.\n\n=== YOUR TASK ===\n\n1. Identify what in bootstrap/ is still used:\n   - run.sh, stop.sh - maybe still used?\n   - orchestrator_with_quota.sh - maybe still used for single-agent?\n   - Templates - moved to templates/?\n\n2. For unused files:\n   - Move to _archive/bootstrap-legacy/\n   - DO NOT DELETE (use mv to _archive)\n\n3. Update any references\n\n4. Document which bootstrap scripts are still active\n\nVerification:\n- Unused scripts archived\n- No broken references\n- README/AGENTS.md updated\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:45:19.475923-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:45:19.475923-05:00"}
{"id":"machinator-lv5","title":"Test: Refactor harness for Golden Files","description":"Goal: Refactor 'main_test.go' to support Golden File testing.\n\nSpecs:\n1. Modify 'main_test.go' helper functions.\n2. IMPORT 'github.com/charmbracelet/x/exp/teatest'.\n3. REPLACE manual 'strings.Contains' checks with 'teatest.RequireEqualOutput(t, tm.FinalOutput(t))' in 'TestMainScreenRenders' (rename to 'TestMainScreenGolden').\n\nVerification:\n- Run 'go test ./orchestrator/cmd/setup/... -update'.\n- Assert that a 'testdata/TestMainScreenGolden.golden' file is generated.\n\nSafety:\n- If 'go test' works, you are DONE.\n- If dependency issues occur, DO NOT force changes to 'go.mod'. STOP and report.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:39:41.095198-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:01:19.087358-05:00","closed_at":"2026-01-11T10:21:31.557157-05:00","close_reason":"Closed"}
{"id":"machinator-mp1","title":"Install system dependencies: ttyd and vhs","description":"VHS requires ttyd. Both vhs and ttyd are missing from the environment. These need to be installed on the host system (e.g., via brew) so Gemini agents can generate UI artifacts.","status":"closed","priority":1,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T17:00:55.289118-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T19:45:12.86181-05:00","closed_at":"2026-01-11T19:45:12.86181-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-mp1","depends_on_id":"machinator-9yr","type":"blocks","created_at":"2026-01-11T17:00:55.291661-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-nxw","title":"Bug: Cannot switch to Orchestrator from Setup TUI","description":"Goal: Fix mode switching from Setup to Orchestrator.\n\n=== PROBLEM ===\n\nAfter running machinator, Setup TUI launches but there is no way to switch to Orchestrator mode. The setup wizard has no \"Start Orchestration\" or similar option.\n\n=== CONTEXT ===\n\nmachinator main.go has the logic to switch modes via ErrSwitchToSetup, but there is no UI trigger to go the other direction (Setup ‚Üí Orchestrator).\n\n=== YOUR TASK ===\n\n1. Add a \"Start Orchestrator\" or \"Run\" button/option to Setup TUI\n2. When selected, return from setup.Run() with the selected project config\n3. main.go then launches orchestrator with that config\n\nVerification:\n- Can start machinator and see Setup\n- Can select project and click \"Run\" to start orchestration\n- Orchestrator runs with selected project\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"bug","assignee":"Gemini-01","created_at":"2026-01-12T00:49:12.183546-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:30:52.226236-05:00","closed_at":"2026-01-12T01:30:52.226236-05:00","close_reason":"Closed"}
{"id":"machinator-pdh","title":"Epic: Unified Machinator Experience","description":"Goal: Integrate setup, orchestrator, and all components into a seamless unified experience.\n\n=== THE VISION ===\n\nPer planning/architecture-vision.md, machinator should be:\n- Single binary entry point\n- Context-aware (setup vs orchestrate)\n- Unified UI that can switch between modes\n- Uses managed Gemini CLI from ~/.machinator\n- Coordinates quota across work\n\n=== CURRENT STATE ===\n\nWe have separate pieces that work independently:\n- orchestrator/cmd/machinator (unified entry point) ‚úÖ\n- orchestrator/pkg/setup (setup wizard TUI) ‚úÖ  \n- orchestrator/pkg/orchestrator (orchestrator TUI) ‚úÖ\n- ~/.machinator config/tools storage ‚úÖ\n- Account pooling infrastructure ‚úÖ\n\nBut they are not fully integrated:\n- Quota check uses wrong Gemini path\n- UI has alignment issues\n- Setup and orchestrator dont share state\n- No way to switch modes mid-session\n\n=== INTEGRATION TASKS ===\n\n1. Quota check uses managed Gemini CLI\n2. Fix UI visual polish issues\n3. Verify setup package exports properly\n4. Verify unified binary works\n5. Add mode switching (setup \u003c-\u003e orchestrate)\n6. Share config between modes\n\n=== SUCCESS CRITERIA ===\n\n- Running ./machinator in any directory does the right thing\n- Quota always uses ~/.machinator/gemini\n- UI looks polished and aligned\n- Can switch between setup and orchestrator modes\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"epic","assignee":"Gemini-01","created_at":"2026-01-11T21:23:29.057557-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:34:38.7724-05:00","closed_at":"2026-01-11T21:46:37.46821-05:00","close_reason":"Closed"}
{"id":"machinator-pdh.1","title":"Feat: Add mode switching between Setup and Orchestrator","description":"Goal: Allow users to switch between Setup and Orchestrator modes within the unified TUI.\n\n=== CONTEXT ===\n\nCurrently the unified machinator binary chooses a mode at startup based on context. Users should be able to switch between modes without restarting.\n\n=== YOUR TASK ===\n\n1. Add a key binding (e.g., F1 or Ctrl+S) to switch to Setup mode\n2. Add a key binding (e.g., F2 or Ctrl+O) to switch to Orchestrator mode\n3. Preserve state when switching (e.g., dont lose activity log)\n4. Update help text to show mode switch keys\n\nDesign options:\nA) Keep separate tea.Model instances, switch between them\nB) Combine into one mega-model with mode enum\nC) Create a parent \"shell\" model that embeds both\n\nVerification:\n- Can launch in either mode\n- Can switch modes with keypress\n- State preserved after switch\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T21:23:57.859104-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:47:11.990647-05:00","closed_at":"2026-01-11T21:47:11.990647-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-pdh.1","depends_on_id":"machinator-pdh","type":"parent-child","created_at":"2026-01-11T21:23:57.860151-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-pdh.1","depends_on_id":"machinator-wtz","type":"blocks","created_at":"2026-01-11T21:23:57.862111-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-pdh.2","title":"Feat: Configurable timeouts and runtime settings","description":"Goal: Add timeout/runtime settings to existing project config and use them in orchestrator.\n\n=== CONTEXT ===\n\nProject configs are stored at:\n~/.machinator/projects/\u003cnumber\u003e/project.json\n\n(Number, not name - names are mutable so we use numeric IDs for directories)\n\nCurrently hardcoded in orchestrator/pkg/orchestrator/tui.go:\n- 5*time.Minute idle timeout (line ~541)\n- 10000 max cycles (Config struct)\n- 60*time.Second sleep (Config struct)\n\n=== YOUR TASK ===\n\n1. Review existing project config structure in:\n   - orchestrator/pkg/setup/setup.go (see loadProjects)\n   - Look for ProjectConfig or similar struct\n\n2. Add new fields to the existing config:\n   IdleTimeout    time.Duration // Default: 5m\n   MaxTaskRuntime time.Duration // Default: 30m  \n   MaxCycles      int           // Default: 10000\n   CooldownPeriod time.Duration // Default: 5s\n\n3. Update orchestrator to LOAD the config at startup:\n   - orchestrator/pkg/orchestrator/tui.go initialModel()\n   - Load from ~/.machinator/projects/\u003cnumber\u003e/project.json\n\n4. Update orchestrator to USE the config:\n   - Replace hardcoded 5*time.Minute with config.IdleTimeout\n   - Replace hardcoded max cycles with config.MaxCycles\n\n5. Ensure defaults work if fields are missing (backwards compat)\n\nVerification:\n- Adding idle_timeout to project.json changes agent behavior\n- Default values match current hardcoded behavior\n- No crashes if config has no timeout fields\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T21:43:47.494074-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:01:47.915457-05:00","closed_at":"2026-01-11T22:01:47.915457-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-pdh.2","depends_on_id":"machinator-pdh","type":"parent-child","created_at":"2026-01-11T21:43:47.494965-05:00","created_by":"bryantinsley"}],"comments":[{"id":10,"issue_id":"machinator-pdh.2","author":"bryantinsley","text":"CONFIG LOCATION: Projects are at ~/.machinator/projects/\u003cname\u003e/project.json - the agent should add timeout fields to this existing structure.","created_at":"2026-01-12T02:49:49Z"},{"id":11,"issue_id":"machinator-pdh.2","author":"bryantinsley","text":"CORRECTION: Directory is project NUMBER not name (names are mutable). Path: ~/.machinator/projects/\u003cnumber\u003e/project.json","created_at":"2026-01-12T02:50:32Z"}]}
{"id":"machinator-pr9","title":"TUI: VHS End-to-End Visual Suite","description":"Create vhs tape scripts for core workflows.\nTasks:\n- Install vhs (or assume available).\n- Create orchestrator/e2e/add_project.tape.\n- Create orchestrator/e2e/edit_project.tape.\n- Create orchestrator/e2e/delete_project.tape.\n- Configure output to docs/ui-history/.\nReference: .agent/plans/ui-testing-strategy.md","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-11T08:38:04.11098-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T08:39:33.773466-05:00","deleted_at":"2026-01-11T08:39:33.773466-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"machinator-q64","title":"Fix: Project rename not working in TUI","description":"Goal: Fix the project rename functionality shown broken in VHS recording.\n\n=== CONTEXT ===\n\nThe crud.gif VHS recording shows that renaming a project does not work. When the user edits the project name and confirms, the change is not saved.\n\n=== YOUR TASK ===\n\n1. Run the setup TUI manually and test rename:\n   go run ./orchestrator/cmd/setup\n   - Create or select a project\n   - Edit the name\n   - Confirm the edit\n   - Verify name is saved to project.json\n\n2. Find the bug in orchestrator/pkg/setup/setup.go\n   - Look at the name edit handler\n   - Check if changes are being written to disk\n\n3. Fix the bug\n\n4. Verify with manual test\n\nVerification:\n- Rename a project via TUI\n- Exit and restart TUI\n- Project shows new name\n\nCHALLENGE:simple","status":"closed","priority":1,"issue_type":"bug","assignee":"Gemini-01","created_at":"2026-01-11T22:51:33.66608-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T23:04:24.142687-05:00","closed_at":"2026-01-11T23:04:24.142687-05:00","close_reason":"Closed"}
{"id":"machinator-r1n","title":"Infra: Create custom Docker image for VHS with bd","description":"Goal: Create a custom Docker image that includes both VHS and bd for realistic E2E testing.\n\n=== CONTEXT ===\n\nVHS Docker needs access to bd (beads CLI) for recording realistic orchestrator demos. Instead of maintaining a mock, we use real bd with a fixture database.\n\nbd is an npm package (@beads/bd) so we need Node in the container.\n\n=== YOUR TASK ===\n\n1. Create docker/Dockerfile.vhs:\n```dockerfile\nFROM ghcr.io/charmbracelet/vhs\n\n# Install Node.js and bd\nRUN apt-get update \u0026\u0026 apt-get install -y nodejs npm\nRUN npm install -g @beads/bd\n\n# Verify\nRUN bd --version\n```\n\n2. Create docker-compose.yml or update scripts/vhs-docker.sh:\n```bash\n# Build custom image\ndocker build -t machinator-vhs -f docker/Dockerfile.vhs .\n\n# Run VHS with bd available\ndocker run --rm -v $PWD:/vhs machinator-vhs \"$@\"\n```\n\n3. Create testdata/fixture-beads/ with sample .beads database:\n   - issues.jsonl with test tasks\n   - Known dependency graph\n\n4. Update .tape files to use the fixture:\n   - Set BEADS_DB to fixture location\n   - Or copy fixture to .beads/ at start of tape\n\n5. Test: scripts/vhs-docker.sh should have bd available\n\nVerification:\n- docker run machinator-vhs bd --version works\n- VHS tapes can call bd commands\n- No need for mock-bd.sh\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T22:04:46.661743-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T22:25:48.916239-05:00","closed_at":"2026-01-11T22:25:48.916239-05:00","close_reason":"Closed"}
{"id":"machinator-sbi","title":"Test: Orchestrator E2E Harness","description":"Create an integration test suite that:\n1. Builds the machinator binary (or orchestrator).\n2. Generates a fixture repo (using em7).\n3. Configures PATH to use Dummy Gemini (2jd).\n4. Runs machinator against the fixture.\n5. Asserts that beads move to 'closed' state.\nReference: planning/architecture-vision.md\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T09:04:52.994865-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:03:01.452391-05:00","closed_at":"2026-01-11T16:03:01.452391-05:00","close_reason":"Implemented E2E test harness in orchestrator/e2e/main_test.go. Updated orchestrator with --headless and --once flags. Enhanced dummy-gemini with AUTO_CLOSE mode for automated testing. Verified with successful E2E test run.","dependencies":[{"issue_id":"machinator-sbi","depends_on_id":"machinator-em7","type":"blocked-by","created_at":"2026-01-11T09:04:52.996185-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-sbi","depends_on_id":"machinator-em7","type":"blocks","created_at":"2026-01-11T09:05:17.997492-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-t07","title":"UI: Migrate Setup TUI to use component library","description":"Goal: Replace ad-hoc clickable elements in Setup with component library.\n\n=== CONTEXT ===\n\nPer planning/ui-component-system.md Phase 2, migrate Setup TUI to use components.\n\n=== YOUR TASK ===\n\n1. Identify all interactive elements in orchestrator/pkg/setup/\n2. Replace with component library:\n   - Buttons ‚Üí components.Button\n   - List items ‚Üí components.ListItem\n   - Add ClickDispatcher\n\n3. Run golden file tests to verify no visual regression\n4. Update VHS tapes if interaction changed\n\nVerification:\n- Setup TUI uses component library\n- All clicks still work\n- Golden tests pass\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:44:47.664187-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:44:47.664187-05:00","dependencies":[{"issue_id":"machinator-t07","depends_on_id":"machinator-7jw.1","type":"blocks","created_at":"2026-01-12T00:44:47.666104-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-t2r","title":"Arch: Refactor setup logic into reusable package","description":"Goal: Verify and finalize the setup package refactoring.\n\n=== CONTEXT ===\n\nThe orchestrator/pkg/setup/ package already exists and contains significant infrastructure. This task is to verify its completeness and ensure it exports a proper Run() entry point.\n\n=== CURRENT STATE ===\n\n- Setup package exists at orchestrator/pkg/setup/\n- Has Model, View, Update, Init functions  \n- Has account pooling infrastructure (accounts.go)\n- Uses ~/.machinator for config\n- Has golden tests\n\n=== YOUR TASK ===\n\n1. Review orchestrator/pkg/setup/setup.go\n2. Verify it exports a Run() function that can be called from main\n3. Verify the setup TUI can run standalone: go run ./orchestrator/cmd/setup\n4. Run tests: go test ./orchestrator/pkg/setup/...\n5. Document any gaps or issues\n\nVerification:\n- go build ./orchestrator/cmd/setup works\n- go test ./orchestrator/pkg/setup/... passes\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T21:19:11.851523-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:23:20.658585-05:00","closed_at":"2026-01-11T21:23:20.658585-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-t2r","depends_on_id":"machinator-pdh","type":"parent-child","created_at":"2026-01-11T21:23:39.744373-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-vi7","title":"Feat: Profile/Account Pooling Directory Structure","description":"Goal: Implement the Gemini Account Pooling structure from architecture-vision.md.\n\nSpecs:\n1. Create directory structure: ~/.machinator/accounts/default/\n2. Each account subdirectory contains its own gemini config symlink/copy.\n3. Add to Setup TUI: 'Manage Accounts' option.\n4. Initial implementation: just 'default' account. Multi-account is future work.\n\nFiles:\n- orchestrator/pkg/setup/accounts.go (new - account management logic)\n- orchestrator/pkg/setup/model.go (add accounts menu item)\n\nVerification:\n- Run setup, verify 'Manage Accounts' appears in menu.\n- ~/.machinator/accounts/default/ directory exists after first run.\n\nSafety:\n- Do NOT delete or modify existing ~/.gemini. Only create new structure.\n- If this requires significant TUI changes, split into subtasks.\n\nCHALLENGE:complex","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T16:39:40.957759-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T20:34:29.294373-05:00","closed_at":"2026-01-11T20:34:29.294373-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-vi7","depends_on_id":"machinator-dq2","type":"blocks","created_at":"2026-01-11T16:40:11.591197-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-vi7","depends_on_id":"machinator-jry","type":"blocks","created_at":"2026-01-11T16:40:11.890658-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-wtz","title":"Arch: Create unified machinator binary","description":"Goal: Verify and test the unified machinator binary.\n\n=== CONTEXT ===\n\nThe unified machinator binary already exists at orchestrator/cmd/machinator/main.go!\nIt has startup logic that:\n- Checks for .beads directory\n- Launches setup if missing or --setup flag\n- Launches orchestrator if .beads exists\n- Adds machinator tools to PATH\n\n=== CURRENT STATE ===\n\nBinary: orchestrator/cmd/machinator/main.go\n- Already imports setup and orchestrator packages\n- Has context-aware startup logic\n- Compiles successfully\n\n=== YOUR TASK ===\n\n1. Build the binary:\n   go build -o machinator ./orchestrator/cmd/machinator\n\n2. Test context-aware startup:\n   - In a directory WITHOUT .beads: should launch setup\n   - In a directory WITH .beads: should launch orchestrator\n   - With --setup flag: should force setup\n\n3. Verify it reads from ~/.machinator correctly\n\n4. Document any issues or missing features\n\nVerification:\n- ./machinator launches appropriate mode based on context\n- ./machinator --setup forces setup mode\n- No crashes or panics\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T21:19:26.070143-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T21:47:12.080359-05:00","closed_at":"2026-01-11T21:47:12.080359-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-wtz","depends_on_id":"machinator-t2r","type":"blocks","created_at":"2026-01-11T21:19:26.073784-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-wtz","depends_on_id":"machinator-pdh","type":"parent-child","created_at":"2026-01-11T21:23:40.042287-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-x4n","title":"Test: Golden File for Main Screen","description":"Implement TestMainScreenGolden in main_test.go. Capture the initial state of the 3-panel layout into a .golden file.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:39:45.826921-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:01:14.203976-05:00","closed_at":"2026-01-11T10:45:50.097122-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-x4n","depends_on_id":"machinator-lv5","type":"blocked-by","created_at":"2026-01-11T08:39:45.827853-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-x4n","depends_on_id":"machinator-lv5","type":"blocks","created_at":"2026-01-11T08:41:40.670687-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-x4q","title":"Test: Add more unit tests for accountpool","description":"Goal: Ensure accountpool package has good test coverage.\n\n=== YOUR TASK ===\n\n1. Review orchestrator/pkg/accountpool/*.go\n2. Add tests for edge cases:\n   - Empty pool\n   - All accounts exhausted\n   - Reset quota\n   - Concurrent access (if applicable)\n\n3. Run go test with coverage\n4. Aim for \u003e80% coverage\n\nVerification:\n- go test ./orchestrator/pkg/accountpool/... passes\n- Coverage \u003e80%\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:45:06.72816-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:45:06.72816-05:00","dependencies":[{"issue_id":"machinator-x4q","depends_on_id":"machinator-dgj.3","type":"blocks","created_at":"2026-01-12T00:45:06.729555-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-x5g","title":"Feat: Add keyboard shortcuts help panel","description":"Goal: Show keyboard shortcuts when user presses ?\n\n=== YOUR TASK ===\n\n1. Add ? key handler to both Setup and Orchestrator TUIs\n2. Display modal/overlay with shortcuts:\n   - q: Quit\n   - e: Execute\n   - Arrow keys: Navigate\n   - Enter: Select\n   - Tab: Switch focus\n   - etc.\n\n3. Press any key to dismiss\n4. Style consistently with rest of TUI\n\nVerification:\n- ? shows help in both TUIs\n- All current shortcuts listed\n- Dismisses on keypress\n\nCHALLENGE:simple","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T00:45:27.722645-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T00:45:27.722645-05:00"}
{"id":"machinator-xoz","title":"Gov: UI Update Helper Script","description":"Create 'scripts/update-ui.sh' that runs 'go test -update' and regenerates VHS tapes. This makes it easy for devs to conform to the new rules.\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T08:40:15.472546-05:00","created_by":"bryantinsley","updated_at":"2026-01-11T16:00:54.833521-05:00","closed_at":"2026-01-11T15:30:58.965323-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-xoz","depends_on_id":"machinator-b4h","type":"blocked-by","created_at":"2026-01-11T08:40:15.473662-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-xoz","depends_on_id":"machinator-b4h","type":"blocks","created_at":"2026-01-11T08:41:41.482418-05:00","created_by":"bryantinsley"}]}
{"id":"machinator-ydu","title":"VHS: Re-record all GIFs with working code","description":"Goal: Re-run all VHS tapes after bugs are fixed and fixtures are in place.\n\n=== CONTEXT ===\n\nAfter fixing the rename bug (q64) and refactoring tapes to use fixtures (9zy), we need to re-record all GIFs to show the working functionality.\n\n=== YOUR TASK ===\n\n1. Build the Linux binary:\n   bazel build //orchestrator/cmd/machinator:machinator-linux\n   \n2. Run VHS Docker for each tape:\n   ./scripts/vhs-docker.sh orchestrator/e2e/navigation.tape\n   ./scripts/vhs-docker.sh orchestrator/e2e/crud.tape\n   \n3. Review the generated GIFs in docs/ui-history/\n   - Verify functionality works correctly\n   - No visual artifacts\n   - Actions complete successfully\n\n4. Commit the updated GIF files\n\nVerification:\n- All GIFs regenerated\n- Rename works in crud.gif\n- No broken functionality visible\n\nCHALLENGE:simple","status":"closed","priority":2,"issue_type":"task","assignee":"Gemini-01","created_at":"2026-01-11T22:52:07.315381-05:00","created_by":"bryantinsley","updated_at":"2026-01-12T01:27:28.659021-05:00","closed_at":"2026-01-12T01:27:28.659021-05:00","close_reason":"Closed","dependencies":[{"issue_id":"machinator-ydu","depends_on_id":"machinator-q64","type":"blocks","created_at":"2026-01-11T22:52:07.320499-05:00","created_by":"bryantinsley"},{"issue_id":"machinator-ydu","depends_on_id":"machinator-9zy","type":"blocks","created_at":"2026-01-11T22:52:07.325372-05:00","created_by":"bryantinsley"}]}
