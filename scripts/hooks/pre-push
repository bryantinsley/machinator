#!/bin/bash
# Pre-push hook - prevents pushing stale JSONL
# Enable: git config core.hooksPath scripts/hooks

# Prefer local bd if it exists
BD_CMD="bd"
if [ -f "./bd" ]; then
    BD_CMD="./bd"
elif [ -f "$(git rev-parse --show-toplevel)/bd" ]; then
    BD_CMD="$(git rev-parse --show-toplevel)/bd"
fi

if command -v "$BD_CMD" &> /dev/null; then
    "$BD_CMD" hooks run pre-push "$@" || exit 1
fi
